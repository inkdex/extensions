"use strict";var source=(()=>{var Ui=Object.create;var be=Object.defineProperty;var ji=Object.getOwnPropertyDescriptor;var Li=Object.getOwnPropertyNames;var $i=Object.getPrototypeOf,qi=Object.prototype.hasOwnProperty;var Vi=(t,e,n)=>e in t?be(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var zi=(t,e)=>()=>(t&&(e=t(t=0)),e);var Dt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Gi=(t,e)=>{for(var n in e)be(t,n,{get:e[n],enumerable:!0})},zn=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Li(e))!qi.call(t,i)&&i!==n&&be(t,i,{get:()=>e[i],enumerable:!(r=ji(e,i))||r.enumerable});return t};var Wi=(t,e,n)=>(n=t!=null?Ui($i(t)):{},zn(e||!t||!t.__esModule?be(n,"default",{value:t,enumerable:!0}):n,t)),Ki=t=>zn(be({},"__esModule",{value:!0}),t);var I=(t,e,n)=>Vi(t,typeof e!="symbol"?e+"":e,n);var Kn=Dt(Le=>{"use strict";d();Le.byteLength=Hi;Le.toByteArray=Ji;Le.fromByteArray=eo;var W=[],$=[],Qi=typeof Uint8Array<"u"?Uint8Array:Array,Mt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ee=0,Gn=Mt.length;ee<Gn;++ee)W[ee]=Mt[ee],$[Mt.charCodeAt(ee)]=ee;var ee,Gn;$[45]=62;$[95]=63;function Wn(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function Hi(t){var e=Wn(t),n=e[0],r=e[1];return(n+r)*3/4-r}function Yi(t,e,n){return(e+n)*3/4-n}function Ji(t){var e,n=Wn(t),r=n[0],i=n[1],o=new Qi(Yi(t,r,i)),s=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=$[t.charCodeAt(c)]<<18|$[t.charCodeAt(c+1)]<<12|$[t.charCodeAt(c+2)]<<6|$[t.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=$[t.charCodeAt(c)]<<2|$[t.charCodeAt(c+1)]>>4,o[s++]=e&255),i===1&&(e=$[t.charCodeAt(c)]<<10|$[t.charCodeAt(c+1)]<<4|$[t.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Xi(t){return W[t>>18&63]+W[t>>12&63]+W[t>>6&63]+W[t&63]}function Zi(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(Xi(r));return i.join("")}function eo(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(Zi(t,s,s+o>a?a:s+o));return r===1?(e=t[n-1],i.push(W[e>>2]+W[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(W[e>>10]+W[e>>4&63]+W[e<<2&63]+"=")),i.join("")}});var Qn=Dt(Tt=>{d();Tt.read=function(t,e,n,r,i){var o,s,a=i*8-r-1,c=(1<<a)-1,p=c>>1,g=-7,y=n?i-1:0,b=n?-1:1,S=t[e+y];for(y+=b,o=S&(1<<-g)-1,S>>=-g,g+=a;g>0;o=o*256+t[e+y],y+=b,g-=8);for(s=o&(1<<-g)-1,o>>=-g,g+=r;g>0;s=s*256+t[e+y],y+=b,g-=8);if(o===0)o=1-p;else{if(o===c)return s?NaN:(S?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-p}return(S?-1:1)*s*Math.pow(2,o-r)};Tt.write=function(t,e,n,r,i,o){var s,a,c,p=o*8-i-1,g=(1<<p)-1,y=g>>1,b=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=r?0:o-1,x=r?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=g):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+y>=1?e+=b/c:e+=b*Math.pow(2,1-y),e*c>=2&&(s++,c/=2),s+y>=g?(a=0,s=g):s+y>=1?(a=(e*c-1)*Math.pow(2,i),s=s+y):(a=e*Math.pow(2,y-1)*Math.pow(2,i),s=0));i>=8;t[n+S]=a&255,S+=x,a/=256,i-=8);for(s=s<<i|a,p+=i;p>0;t[n+S]=s&255,S+=x,s/=256,p-=8);t[n+S-x]|=v*128}});var fr=Dt(he=>{"use strict";d();var Ft=Kn(),ce=Qn(),Hn=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;he.Buffer=m;he.SlowBuffer=so;he.INSPECT_MAX_BYTES=50;var $e=2147483647;he.kMaxLength=$e;m.TYPED_ARRAY_SUPPORT=to();!m.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function to(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}});Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}});function H(t){if(t>$e)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,m.prototype),e}function m(t,e,n){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _t(t)}return Zn(t,e,n)}m.poolSize=8192;function Zn(t,e,n){if(typeof t=="string")return ro(t,e);if(ArrayBuffer.isView(t))return io(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(K(t,ArrayBuffer)||t&&K(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(K(t,SharedArrayBuffer)||t&&K(t.buffer,SharedArrayBuffer)))return Nt(t,e,n);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let r=t.valueOf&&t.valueOf();if(r!=null&&r!==t)return m.from(r,e,n);let i=oo(t);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return m.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}m.from=function(t,e,n){return Zn(t,e,n)};Object.setPrototypeOf(m.prototype,Uint8Array.prototype);Object.setPrototypeOf(m,Uint8Array);function er(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function no(t,e,n){return er(t),t<=0?H(t):e!==void 0?typeof n=="string"?H(t).fill(e,n):H(t).fill(e):H(t)}m.alloc=function(t,e,n){return no(t,e,n)};function _t(t){return er(t),H(t<0?0:kt(t)|0)}m.allocUnsafe=function(t){return _t(t)};m.allocUnsafeSlow=function(t){return _t(t)};function ro(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!m.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let n=tr(t,e)|0,r=H(n),i=r.write(t,e);return i!==n&&(r=r.slice(0,i)),r}function Ot(t){let e=t.length<0?0:kt(t.length)|0,n=H(e);for(let r=0;r<e;r+=1)n[r]=t[r]&255;return n}function io(t){if(K(t,Uint8Array)){let e=new Uint8Array(t);return Nt(e.buffer,e.byteOffset,e.byteLength)}return Ot(t)}function Nt(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return e===void 0&&n===void 0?r=new Uint8Array(t):n===void 0?r=new Uint8Array(t,e):r=new Uint8Array(t,e,n),Object.setPrototypeOf(r,m.prototype),r}function oo(t){if(m.isBuffer(t)){let e=kt(t.length)|0,n=H(e);return n.length===0||t.copy(n,0,0,e),n}if(t.length!==void 0)return typeof t.length!="number"||jt(t.length)?H(0):Ot(t);if(t.type==="Buffer"&&Array.isArray(t.data))return Ot(t.data)}function kt(t){if(t>=$e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+$e.toString(16)+" bytes");return t|0}function so(t){return+t!=t&&(t=0),m.alloc(+t)}m.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==m.prototype};m.compare=function(e,n){if(K(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),K(n,Uint8Array)&&(n=m.from(n,n.offset,n.byteLength)),!m.isBuffer(e)||!m.isBuffer(n))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===n)return 0;let r=e.length,i=n.length;for(let o=0,s=Math.min(r,i);o<s;++o)if(e[o]!==n[o]){r=e[o],i=n[o];break}return r<i?-1:i<r?1:0};m.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};m.concat=function(e,n){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return m.alloc(0);let r;if(n===void 0)for(n=0,r=0;r<e.length;++r)n+=e[r].length;let i=m.allocUnsafe(n),o=0;for(r=0;r<e.length;++r){let s=e[r];if(K(s,Uint8Array))o+s.length>i.length?(m.isBuffer(s)||(s=m.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(m.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function tr(t,e){if(m.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||K(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let n=t.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&n===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Bt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return cr(t).length;default:if(i)return r?-1:Bt(t).length;e=(""+e).toLowerCase(),i=!0}}m.byteLength=tr;function ao(t,e,n){let r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,e>>>=0,n<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return wo(this,e,n);case"utf8":case"utf-8":return rr(this,e,n);case"ascii":return mo(this,e,n);case"latin1":case"binary":return yo(this,e,n);case"base64":return po(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bo(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}m.prototype._isBuffer=!0;function te(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}m.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let n=0;n<e;n+=2)te(this,n,n+1);return this};m.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let n=0;n<e;n+=4)te(this,n,n+3),te(this,n+1,n+2);return this};m.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let n=0;n<e;n+=8)te(this,n,n+7),te(this,n+1,n+6),te(this,n+2,n+5),te(this,n+3,n+4);return this};m.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?rr(this,0,e):ao.apply(this,arguments)};m.prototype.toLocaleString=m.prototype.toString;m.prototype.equals=function(e){if(!m.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:m.compare(this,e)===0};m.prototype.inspect=function(){let e="",n=he.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"};Hn&&(m.prototype[Hn]=m.prototype.inspect);m.prototype.compare=function(e,n,r,i,o){if(K(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),!m.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(n===void 0&&(n=0),r===void 0&&(r=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),n<0||r>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&n>=r)return 0;if(i>=o)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,a=r-n,c=Math.min(s,a),p=this.slice(i,o),g=e.slice(n,r);for(let y=0;y<c;++y)if(p[y]!==g[y]){s=p[y],a=g[y];break}return s<a?-1:a<s?1:0};function nr(t,e,n,r,i){if(t.length===0)return-1;if(typeof n=="string"?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,jt(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0)if(i)n=0;else return-1;if(typeof e=="string"&&(e=m.from(e,r)),m.isBuffer(e))return e.length===0?-1:Yn(t,e,n,r,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):Yn(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function Yn(t,e,n,r,i){let o=1,s=t.length,a=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,n/=2}function c(g,y){return o===1?g[y]:g.readUInt16BE(y*o)}let p;if(i){let g=-1;for(p=n;p<s;p++)if(c(t,p)===c(e,g===-1?0:p-g)){if(g===-1&&(g=p),p-g+1===a)return g*o}else g!==-1&&(p-=p-g),g=-1}else for(n+a>s&&(n=s-a),p=n;p>=0;p--){let g=!0;for(let y=0;y<a;y++)if(c(t,p+y)!==c(e,y)){g=!1;break}if(g)return p}return-1}m.prototype.includes=function(e,n,r){return this.indexOf(e,n,r)!==-1};m.prototype.indexOf=function(e,n,r){return nr(this,e,n,r,!0)};m.prototype.lastIndexOf=function(e,n,r){return nr(this,e,n,r,!1)};function uo(t,e,n,r){n=Number(n)||0;let i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;let o=e.length;r>o/2&&(r=o/2);let s;for(s=0;s<r;++s){let a=parseInt(e.substr(s*2,2),16);if(jt(a))return s;t[n+s]=a}return s}function lo(t,e,n,r){return qe(Bt(e,t.length-n),t,n,r)}function co(t,e,n,r){return qe(Io(e),t,n,r)}function fo(t,e,n,r){return qe(cr(e),t,n,r)}function ho(t,e,n,r){return qe(vo(e,t.length-n),t,n,r)}m.prototype.write=function(e,n,r,i){if(n===void 0)i="utf8",r=this.length,n=0;else if(r===void 0&&typeof n=="string")i=n,r=this.length,n=0;else if(isFinite(n))n=n>>>0,isFinite(r)?(r=r>>>0,i===void 0&&(i="utf8")):(i=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-n;if((r===void 0||r>o)&&(r=o),e.length>0&&(r<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return uo(this,e,n,r);case"utf8":case"utf-8":return lo(this,e,n,r);case"ascii":case"latin1":case"binary":return co(this,e,n,r);case"base64":return fo(this,e,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ho(this,e,n,r);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function po(t,e,n){return e===0&&n===t.length?Ft.fromByteArray(t):Ft.fromByteArray(t.slice(e,n))}function rr(t,e,n){n=Math.min(t.length,n);let r=[],i=e;for(;i<n;){let o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){let c,p,g,y;switch(a){case 1:o<128&&(s=o);break;case 2:c=t[i+1],(c&192)===128&&(y=(o&31)<<6|c&63,y>127&&(s=y));break;case 3:c=t[i+1],p=t[i+2],(c&192)===128&&(p&192)===128&&(y=(o&15)<<12|(c&63)<<6|p&63,y>2047&&(y<55296||y>57343)&&(s=y));break;case 4:c=t[i+1],p=t[i+2],g=t[i+3],(c&192)===128&&(p&192)===128&&(g&192)===128&&(y=(o&15)<<18|(c&63)<<12|(p&63)<<6|g&63,y>65535&&y<1114112&&(s=y))}}s===null?(s=65533,a=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|s&1023),r.push(s),i+=a}return go(r)}var Jn=4096;function go(t){let e=t.length;if(e<=Jn)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Jn));return n}function mo(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]&127);return r}function yo(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function wo(t,e,n){let r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let o=e;o<n;++o)i+=Co[t[o]];return i}function bo(t,e,n){let r=t.slice(e,n),i="";for(let o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+r[o+1]*256);return i}m.prototype.slice=function(e,n){let r=this.length;e=~~e,n=n===void 0?r:~~n,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<e&&(n=e);let i=this.subarray(e,n);return Object.setPrototypeOf(i,m.prototype),i};function T(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}m.prototype.readUintLE=m.prototype.readUIntLE=function(e,n,r){e=e>>>0,n=n>>>0,r||T(e,n,this.length);let i=this[e],o=1,s=0;for(;++s<n&&(o*=256);)i+=this[e+s]*o;return i};m.prototype.readUintBE=m.prototype.readUIntBE=function(e,n,r){e=e>>>0,n=n>>>0,r||T(e,n,this.length);let i=this[e+--n],o=1;for(;n>0&&(o*=256);)i+=this[e+--n]*o;return i};m.prototype.readUint8=m.prototype.readUInt8=function(e,n){return e=e>>>0,n||T(e,1,this.length),this[e]};m.prototype.readUint16LE=m.prototype.readUInt16LE=function(e,n){return e=e>>>0,n||T(e,2,this.length),this[e]|this[e+1]<<8};m.prototype.readUint16BE=m.prototype.readUInt16BE=function(e,n){return e=e>>>0,n||T(e,2,this.length),this[e]<<8|this[e+1]};m.prototype.readUint32LE=m.prototype.readUInt32LE=function(e,n){return e=e>>>0,n||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};m.prototype.readUint32BE=m.prototype.readUInt32BE=function(e,n){return e=e>>>0,n||T(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};m.prototype.readBigUInt64LE=J(function(e){e=e>>>0,fe(e,"offset");let n=this[e],r=this[e+7];(n===void 0||r===void 0)&&xe(e,this.length-8);let i=n+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+r*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});m.prototype.readBigUInt64BE=J(function(e){e=e>>>0,fe(e,"offset");let n=this[e],r=this[e+7];(n===void 0||r===void 0)&&xe(e,this.length-8);let i=n*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+r;return(BigInt(i)<<BigInt(32))+BigInt(o)});m.prototype.readIntLE=function(e,n,r){e=e>>>0,n=n>>>0,r||T(e,n,this.length);let i=this[e],o=1,s=0;for(;++s<n&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*n)),i};m.prototype.readIntBE=function(e,n,r){e=e>>>0,n=n>>>0,r||T(e,n,this.length);let i=n,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*n)),s};m.prototype.readInt8=function(e,n){return e=e>>>0,n||T(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};m.prototype.readInt16LE=function(e,n){e=e>>>0,n||T(e,2,this.length);let r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r};m.prototype.readInt16BE=function(e,n){e=e>>>0,n||T(e,2,this.length);let r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r};m.prototype.readInt32LE=function(e,n){return e=e>>>0,n||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};m.prototype.readInt32BE=function(e,n){return e=e>>>0,n||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};m.prototype.readBigInt64LE=J(function(e){e=e>>>0,fe(e,"offset");let n=this[e],r=this[e+7];(n===void 0||r===void 0)&&xe(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(r<<24);return(BigInt(i)<<BigInt(32))+BigInt(n+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});m.prototype.readBigInt64BE=J(function(e){e=e>>>0,fe(e,"offset");let n=this[e],r=this[e+7];(n===void 0||r===void 0)&&xe(e,this.length-8);let i=(n<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+r)});m.prototype.readFloatLE=function(e,n){return e=e>>>0,n||T(e,4,this.length),ce.read(this,e,!0,23,4)};m.prototype.readFloatBE=function(e,n){return e=e>>>0,n||T(e,4,this.length),ce.read(this,e,!1,23,4)};m.prototype.readDoubleLE=function(e,n){return e=e>>>0,n||T(e,8,this.length),ce.read(this,e,!0,52,8)};m.prototype.readDoubleBE=function(e,n){return e=e>>>0,n||T(e,8,this.length),ce.read(this,e,!1,52,8)};function k(t,e,n,r,i,o){if(!m.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}m.prototype.writeUintLE=m.prototype.writeUIntLE=function(e,n,r,i){if(e=+e,n=n>>>0,r=r>>>0,!i){let a=Math.pow(2,8*r)-1;k(this,e,n,r,a,0)}let o=1,s=0;for(this[n]=e&255;++s<r&&(o*=256);)this[n+s]=e/o&255;return n+r};m.prototype.writeUintBE=m.prototype.writeUIntBE=function(e,n,r,i){if(e=+e,n=n>>>0,r=r>>>0,!i){let a=Math.pow(2,8*r)-1;k(this,e,n,r,a,0)}let o=r-1,s=1;for(this[n+o]=e&255;--o>=0&&(s*=256);)this[n+o]=e/s&255;return n+r};m.prototype.writeUint8=m.prototype.writeUInt8=function(e,n,r){return e=+e,n=n>>>0,r||k(this,e,n,1,255,0),this[n]=e&255,n+1};m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(e,n,r){return e=+e,n=n>>>0,r||k(this,e,n,2,65535,0),this[n]=e&255,this[n+1]=e>>>8,n+2};m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(e,n,r){return e=+e,n=n>>>0,r||k(this,e,n,2,65535,0),this[n]=e>>>8,this[n+1]=e&255,n+2};m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(e,n,r){return e=+e,n=n>>>0,r||k(this,e,n,4,4294967295,0),this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=e&255,n+4};m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(e,n,r){return e=+e,n=n>>>0,r||k(this,e,n,4,4294967295,0),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255,n+4};function ir(t,e,n,r,i){lr(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n++]=o,o=o>>8,t[n++]=o,o=o>>8,t[n++]=o,o=o>>8,t[n++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s=s>>8,t[n++]=s,s=s>>8,t[n++]=s,s=s>>8,t[n++]=s,n}function or(t,e,n,r,i){lr(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n+7]=o,o=o>>8,t[n+6]=o,o=o>>8,t[n+5]=o,o=o>>8,t[n+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s=s>>8,t[n+2]=s,s=s>>8,t[n+1]=s,s=s>>8,t[n]=s,n+8}m.prototype.writeBigUInt64LE=J(function(e,n=0){return ir(this,e,n,BigInt(0),BigInt("0xffffffffffffffff"))});m.prototype.writeBigUInt64BE=J(function(e,n=0){return or(this,e,n,BigInt(0),BigInt("0xffffffffffffffff"))});m.prototype.writeIntLE=function(e,n,r,i){if(e=+e,n=n>>>0,!i){let c=Math.pow(2,8*r-1);k(this,e,n,r,c-1,-c)}let o=0,s=1,a=0;for(this[n]=e&255;++o<r&&(s*=256);)e<0&&a===0&&this[n+o-1]!==0&&(a=1),this[n+o]=(e/s>>0)-a&255;return n+r};m.prototype.writeIntBE=function(e,n,r,i){if(e=+e,n=n>>>0,!i){let c=Math.pow(2,8*r-1);k(this,e,n,r,c-1,-c)}let o=r-1,s=1,a=0;for(this[n+o]=e&255;--o>=0&&(s*=256);)e<0&&a===0&&this[n+o+1]!==0&&(a=1),this[n+o]=(e/s>>0)-a&255;return n+r};m.prototype.writeInt8=function(e,n,r){return e=+e,n=n>>>0,r||k(this,e,n,1,127,-128),e<0&&(e=255+e+1),this[n]=e&255,n+1};m.prototype.writeInt16LE=function(e,n,r){return e=+e,n=n>>>0,r||k(this,e,n,2,32767,-32768),this[n]=e&255,this[n+1]=e>>>8,n+2};m.prototype.writeInt16BE=function(e,n,r){return e=+e,n=n>>>0,r||k(this,e,n,2,32767,-32768),this[n]=e>>>8,this[n+1]=e&255,n+2};m.prototype.writeInt32LE=function(e,n,r){return e=+e,n=n>>>0,r||k(this,e,n,4,2147483647,-2147483648),this[n]=e&255,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24,n+4};m.prototype.writeInt32BE=function(e,n,r){return e=+e,n=n>>>0,r||k(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255,n+4};m.prototype.writeBigInt64LE=J(function(e,n=0){return ir(this,e,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});m.prototype.writeBigInt64BE=J(function(e,n=0){return or(this,e,n,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function sr(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function ar(t,e,n,r,i){return e=+e,n=n>>>0,i||sr(t,e,n,4,34028234663852886e22,-34028234663852886e22),ce.write(t,e,n,r,23,4),n+4}m.prototype.writeFloatLE=function(e,n,r){return ar(this,e,n,!0,r)};m.prototype.writeFloatBE=function(e,n,r){return ar(this,e,n,!1,r)};function ur(t,e,n,r,i){return e=+e,n=n>>>0,i||sr(t,e,n,8,17976931348623157e292,-17976931348623157e292),ce.write(t,e,n,r,52,8),n+8}m.prototype.writeDoubleLE=function(e,n,r){return ur(this,e,n,!0,r)};m.prototype.writeDoubleBE=function(e,n,r){return ur(this,e,n,!1,r)};m.prototype.copy=function(e,n,r,i){if(!m.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),!i&&i!==0&&(i=this.length),n>=e.length&&(n=e.length),n||(n=0),i>0&&i<r&&(i=r),i===r||e.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);let o=i-r;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(n,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),n),o};m.prototype.fill=function(e,n,r,i){if(typeof e=="string"){if(typeof n=="string"?(i=n,n=0,r=this.length):typeof r=="string"&&(i=r,r=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!m.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n=n>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);let o;if(typeof e=="number")for(o=n;o<r;++o)this[o]=e;else{let s=m.isBuffer(e)?e:m.from(e,i),a=s.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-n;++o)this[o+n]=s[o%a]}return this};var le={};function Ut(t,e,n){le[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}Ut("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Ut("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);Ut("ERR_OUT_OF_RANGE",function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=Xn(String(n)):typeof n=="bigint"&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=Xn(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r},RangeError);function Xn(t){let e="",n=t.length,r=t[0]==="-"?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function xo(t,e,n){fe(e,"offset"),(t[e]===void 0||t[e+n]===void 0)&&xe(e,t.length-(n+1))}function lr(t,e,n,r,i,o){if(t>n||t<e){let s=typeof e=="bigint"?"n":"",a;throw o>3?e===0||e===BigInt(0)?a=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:a=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:a=`>= ${e}${s} and <= ${n}${s}`,new le.ERR_OUT_OF_RANGE("value",a,t)}xo(r,i,o)}function fe(t,e){if(typeof t!="number")throw new le.ERR_INVALID_ARG_TYPE(e,"number",t)}function xe(t,e,n){throw Math.floor(t)!==t?(fe(t,n),new le.ERR_OUT_OF_RANGE(n||"offset","an integer",t)):e<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}var So=/[^+/0-9A-Za-z-_]/g;function Eo(t){if(t=t.split("=")[0],t=t.trim().replace(So,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function Bt(t,e){e=e||1/0;let n,r=t.length,i=null,o=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return o}function Io(t){let e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n)&255);return e}function vo(t,e){let n,r,i,o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function cr(t){return Ft.toByteArray(Eo(t))}function qe(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function K(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function jt(t){return t!==t}var Co=(function(){let t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){let r=n*16;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e})();function J(t){return typeof BigInt>"u"?Po:t}function Po(){throw new Error("BigInt not supported")}});var hr,w,d=zi(()=>{hr=Wi(fr(),1),w=hr.Buffer});var Yo={};Gi(Yo,{WEEBDEX_API_DOMAIN:()=>N,WEEBDEX_COVER_DOMAIN:()=>Vn,WEEBDEX_DOMAIN:()=>Me,WeebDex:()=>Ho,WeebDexExtension:()=>je});d();d();d();d();d();var q=class{reloadForm(){let e=this.__underlying_formId;e&&Application.formDidChange(e)}get requiresExplicitSubmission(){return!1}};d();function U(t,e){return{...e,id:t,type:"toggleRow",isHidden:e.isHidden??!1}}function V(t,e){return{...e,id:t,type:"selectRow",isHidden:e.isHidden??!1}}function Se(t,e){return{...e,id:t,type:"navigationRow",isHidden:e.isHidden??!1}}d();function D(t,e){let n;return typeof t=="string"?n={id:t}:n=t,{...n,items:e.filter(r=>r)}}d();d();d();d();d();d();d();d();d();d();d();var X=class{constructor(e){I(this,"id");this.id=e}registerInterceptor(){Application.registerInterceptor(this.id,Application.Selector(this,"interceptRequest"),Application.Selector(this,"interceptResponse"))}unregisterInterceptor(){Application.unregisterInterceptor(this.id)}};d();d();d();d();var Ve={},Lt={},$t=async t=>{if(Ve[t]){await Ve[t],await $t(t);return}Ve[t]=new Promise(e=>Lt[t]=()=>{delete Ve[t],e()})},pr=t=>{Lt[t]&&Lt[t]()};var ze=class extends X{constructor(n,r){super(n);I(this,"options");I(this,"promise");I(this,"currentRequestsMade",0);I(this,"lastReset",Date.now());I(this,"imageRegex",new RegExp(/\.(png|gif|jpeg|jpg|webp)(\?|$)/i));this.options=r}async interceptRequest(n){return this.options.ignoreImages&&this.imageRegex.test(n.url)||(await $t(this.id),await this.incrementRequestCount(),pr(this.id)),n}async interceptResponse(n,r,i){return i}async incrementRequestCount(){if(await this.promise,(Date.now()-this.lastReset)/1e3>this.options.bufferInterval&&(this.currentRequestsMade=0,this.lastReset=Date.now()),this.currentRequestsMade+=1,this.currentRequestsMade>=this.options.numberOfRequests){let r=(Date.now()-this.lastReset)/1e3;if(r<=this.options.bufferInterval){let i=this.options.bufferInterval-r;console.log(`[BasicRateLimiter] rate limit hit, sleeping for ${i}`),this.promise=Application.sleep(i)}}}};d();var Ge=class extends Error{constructor(n,r="Cloudflare bypass is required"){super(r);I(this,"resolutionRequest");I(this,"type","cloudflareError");this.resolutionRequest=n}};d();d();function dr(t){let e={},n=/^(?:([a-zA-Z][a-zA-Z\d+\-.]*):)?(?:\/\/([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/,r=t.match(n);if(!r)throw new Error("Invalid URL string provided.");if(r[1]!==void 0&&r[1]!==""&&(e.protocol=r[1]),r[2]!==void 0&&r[2]!==""){let i=r[2],o="",s="",a=i.indexOf("@");if(a!==-1){if(o=i.substring(0,a),s=i.substring(a+1),o!==""){let c=o.indexOf(":");c!==-1?(e.username=o.substring(0,c),e.password=o.substring(c+1)):(e.username=o,e.password="")}}else s=i;if(s!=="")if(s.startsWith("[")){let c=s.indexOf("]");if(c===-1)throw new Error("Invalid IPv6 address in URL update.");e.hostname=s.substring(0,c+1);let p=s.substring(c+1);p.startsWith(":")&&(e.port=p.substring(1))}else{let c=s.lastIndexOf(":");c!==-1&&s.indexOf(":")===c?(e.hostname=s.substring(0,c),e.port=s.substring(c+1)):(e.hostname=s,e.port="")}}if(r[3]!==void 0&&r[3]!==""&&(e.path=r[3].startsWith("/")?r[3]:`/${r[3]}`),r[4]!==void 0){let i={},o=r[4].split("&");for(let s of o){if(!s)continue;let[a,c=""]=s.split("=");if(a===void 0)continue;let p=decodeURIComponent(a),g=decodeURIComponent(c);if(p in i){let y=i[p];Array.isArray(y)?y.push(g):i[p]=[y,g]}else i[p]=g}e.queryItems=i}return r[5]!==void 0&&(e.fragment=r[5]),e}var B=class{constructor(e){I(this,"protocol");I(this,"hostname");I(this,"path");I(this,"username");I(this,"password");I(this,"port");I(this,"queryItems");I(this,"fragment");let n=dr(e);if(!n.hostname||!n.protocol)throw new Error("URL Hostname and Protocol are required");this.hostname=n.hostname,this.protocol=n.protocol,this.path=n.path??"",this.username=n.username,this.password=n.password,this.port=n.port,this.queryItems=n.queryItems,this.fragment=n.fragment}toString(){let e=`${this.protocol}://`;if(this.username!==void 0&&this.username!==""&&(e+=this.username,this.password!==void 0&&this.password!==""&&(e+=`:${this.password}`),e+="@"),e+=this.hostname,this.port!==void 0&&this.port!==""&&(e+=`:${this.port}`),this.path!==""&&(e+=this.path.startsWith("/")?this.path:`/${this.path}`),this.queryItems!==void 0){let n=Object.keys(this.queryItems),r=[];if(n.length>0)for(let i of n){let o=this.queryItems[i];if(Array.isArray(o))for(let s of o)r.push(`${encodeURIComponent(i)}=${encodeURIComponent(s)}`);else o!==void 0&&r.push(`${encodeURIComponent(i)}=${encodeURIComponent(o)}`)}e+=`?${r.join("&")}`}return this.fragment!==void 0&&(e+=`#${this.fragment}`),e}setProtocol(e){if(e==="")throw new Error("Protocol is required");return this.protocol=e,this}setUsername(e){return e===""?this.username=void 0:this.username=e,this}setPassword(e){return e===""?this.password=void 0:this.password=e,this}setHostname(e){if(e==="")throw new Error("Hostname is required");return this.hostname=e,this}setPort(e){return e===""?this.port=void 0:this.port=e,this}setPath(e){return this.path=e.startsWith("/")?e:`/${e}`,this}addPathComponent(e){return this.path=(this.path??"")+(e.startsWith("/")?e:`/${e}`),this}setQueryItems(e){return this.queryItems=e,this}setQueryItem(e,n){return this.queryItems===void 0&&(this.queryItems={}),this.queryItems[e]=n,this}removeQueryItem(e){return delete this.queryItems?.[e],this}setFragment(e){return this.fragment=e,this}update(e){let n;return typeof e=="string"?n=dr(e):n=e,n.protocol!==void 0&&this.setProtocol(n.protocol),n.username!==void 0&&this.setUsername(n.username),n.password!==void 0&&this.setPassword(n.password),n.hostname!==void 0&&this.setHostname(n.hostname),n.port!==void 0&&this.setPort(n.port),n.path!==void 0&&this.setPath(n.path),n.queryItems!==void 0&&this.setQueryItems(n.queryItems),n.fragment!==void 0&&this.setFragment(n.fragment),this}};var gr="cookie_store_cookies",We=class extends X{constructor(n){super("cookie_store");I(this,"options");I(this,"_cookies",{});this.options=n,this.loadCookiesFromStorage()}get cookies(){return Object.freeze(Object.values(this._cookies))}set cookies(n){let r={};for(let i of n)this.isCookieExpired(i)||(r[this.cookieIdentifier(i)]=i);this._cookies=r,this.saveCookiesToStorage()}async interceptRequest(n){return n.cookies={...n.cookies??{},...this.cookiesForUrl(n.url).reduce((r,i)=>(r[i.name]=i.value,r),{})},n}async interceptResponse(n,r,i){let o=this._cookies;for(let s of r.cookies){let a=this.cookieIdentifier(s);if(this.isCookieExpired(s)){delete o[a];continue}o[a]=s}return this._cookies=o,this.saveCookiesToStorage(),i}setCookie(n){this.isCookieExpired(n)||(this._cookies[this.cookieIdentifier(n)]=n,this.saveCookiesToStorage())}deleteCookie(n){delete this._cookies[this.cookieIdentifier(n)]}cookiesForUrl(n){console.log("[COMPAT] COOKIES FOR URL");let r=new B(n),i=r.hostname;if(!i)return[];let o={},s=r.path.startsWith("/")?r.path:`/${r.path}`,a=i.split("."),c=s.split("/");c.shift();let p=this.cookies;for(let g of p){if(this.isCookieExpired(g)){delete this._cookies[this.cookieIdentifier(g)];continue}let b=this.cookieSanitizedDomain(g).split(".");if(a.length<b.length||b.length==0)continue;let S=!0;for(let R=0;R<b.length;R++){let O=b.length-1-R,ki=a.length-1-R;if(b[O]!=a[ki]){S=!1;break}}if(!S)continue;let x=this.cookieSanitizedPath(g),v=x.split("/");v.shift();let M=0;if(s===x)M=Number.MAX_SAFE_INTEGER;else if(v.length===0||x==="/")M=1;else if(s.startsWith(x)&&c.length>=v.length)for(let R=0;R<v.length&&v[R]===c[R];R++)M+=1;M<=0||(o[g.name]?.pathMatches??0)<M&&(o[g.name]={cookie:g,pathMatches:M})}return Object.values(o).map(g=>g.cookie)}cookieIdentifier(n){return`${n.name}-${this.cookieSanitizedDomain(n)}-${this.cookieSanitizedPath(n)}`}cookieSanitizedPath(n){return n.path?.startsWith("/")?n.path:"/"+(n.path??"")}cookieSanitizedDomain(n){return n.domain.replace(/^(www)?\.?/gi,"").toLowerCase()}isCookieExpired(n){return!!(n.expires&&n.expires.getTime()<=Date.now())}loadCookiesFromStorage(){if(this.options.storage=="memory")return;let n=Application.getState(gr);if(!n){this._cookies={};return}let r={};for(let i of n)!i.expires||this.isCookieExpired(i)||(r[this.cookieIdentifier(i)]=i);this._cookies=r}saveCookiesToStorage(){this.options.storage!="memory"&&Application.setState(this.cookies.filter(n=>n.expires),gr)}};d();d();var qt;(function(t){t[t.NONE=0]="NONE",t[t.MANGA_CHAPTERS=1]="MANGA_CHAPTERS",t[t.CHAPTER_PROVIDING=1]="CHAPTER_PROVIDING",t[t.MANGA_PROGRESS=2]="MANGA_PROGRESS",t[t.MANGA_PROGRESS_PROVIDING=2]="MANGA_PROGRESS_PROVIDING",t[t.DISCOVER_SECIONS=4]="DISCOVER_SECIONS",t[t.DISCOVER_SECIONS_PROVIDING=4]="DISCOVER_SECIONS_PROVIDING",t[t.COLLECTION_MANAGEMENT=8]="COLLECTION_MANAGEMENT",t[t.MANAGED_COLLECTION_PROVIDING=8]="MANAGED_COLLECTION_PROVIDING",t[t.CLOUDFLARE_BYPASS_REQUIRED=16]="CLOUDFLARE_BYPASS_REQUIRED",t[t.CLOUDFLARE_BYPASS_PROVIDING=16]="CLOUDFLARE_BYPASS_PROVIDING",t[t.SETTINGS_UI=32]="SETTINGS_UI",t[t.SETTINGS_FORM_PROVIDING=32]="SETTINGS_FORM_PROVIDING",t[t.MANGA_SEARCH=64]="MANGA_SEARCH",t[t.SEARCH_RESULTS_PROVIDING=64]="SEARCH_RESULTS_PROVIDING"})(qt||(qt={}));var pe;(function(t){t.EVERYONE="SAFE",t.MATURE="MATURE",t.ADULT="ADULT"})(pe||(pe={}));d();var Cr=Object.defineProperty,h=(t,e)=>Cr(t,"name",{value:e,configurable:!0}),an=(t,e)=>{for(var n in e)Cr(t,n,{get:e[n],enumerable:!0})},Ke={};an(Ke,{addChainableMethod:()=>bn,addLengthGuard:()=>Ae,addMethod:()=>mn,addProperty:()=>gn,checkError:()=>j,compareByInspect:()=>Je,eql:()=>Xr,expectTypes:()=>Fr,flag:()=>E,getActual:()=>nt,getMessage:()=>cn,getName:()=>it,getOperator:()=>In,getOwnEnumerableProperties:()=>En,getOwnEnumerablePropertySymbols:()=>Sn,getPathInfo:()=>dn,hasProperty:()=>rt,inspect:()=>C,isNaN:()=>Xe,isNumeric:()=>F,isProxyEnabled:()=>Pe,isRegExp:()=>Ze,objDisplay:()=>ne,overwriteChainableMethod:()=>xn,overwriteMethod:()=>wn,overwriteProperty:()=>yn,proxify:()=>me,test:()=>un,transferFlags:()=>G,type:()=>A});var j={};an(j,{compatibleConstructor:()=>Rr,compatibleInstance:()=>Ar,compatibleMessage:()=>Dr,getConstructorName:()=>Mr,getMessage:()=>Tr});function tt(t){return t instanceof Error||Object.prototype.toString.call(t)==="[object Error]"}h(tt,"isErrorInstance");function Pr(t){return Object.prototype.toString.call(t)==="[object RegExp]"}h(Pr,"isRegExp");function Ar(t,e){return tt(e)&&t===e}h(Ar,"compatibleInstance");function Rr(t,e){return tt(e)?t.constructor===e.constructor||t instanceof e.constructor:(typeof e=="object"||typeof e=="function")&&e.prototype?t.constructor===e||t instanceof e:!1}h(Rr,"compatibleConstructor");function Dr(t,e){let n=typeof t=="string"?t:t.message;return Pr(e)?e.test(n):typeof e=="string"?n.indexOf(e)!==-1:!1}h(Dr,"compatibleMessage");function Mr(t){let e=t;return tt(t)?e=t.constructor.name:typeof t=="function"&&(e=t.name,e===""&&(e=new t().name||e)),e}h(Mr,"getConstructorName");function Tr(t){let e="";return t&&t.message?e=t.message:typeof t=="string"&&(e=t),e}h(Tr,"getMessage");function E(t,e,n){let r=t.__flags||(t.__flags=Object.create(null));if(arguments.length===3)r[e]=n;else return r[e]}h(E,"flag");function un(t,e){let n=E(t,"negate"),r=e[0];return n?!r:r}h(un,"test");function A(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}h(A,"type");var Ro="captureStackTrace"in Error,re,P=(re=class extends Error{constructor(n="Unspecified AssertionError",r,i){super(n);I(this,"message");this.message=n,Ro&&Error.captureStackTrace(this,i||re);for(let o in r)o in this||(this[o]=r[o])}get name(){return"AssertionError"}get ok(){return!1}toJSON(n){return{...this,name:this.name,message:this.message,ok:!1,stack:n!==!1?this.stack:void 0}}},h(re,"AssertionError"),re);function Fr(t,e){let n=E(t,"message"),r=E(t,"ssfi");n=n?n+": ":"",t=E(t,"object"),e=e.map(function(s){return s.toLowerCase()}),e.sort();let i=e.map(function(s,a){let c=~["a","e","i","o","u"].indexOf(s.charAt(0))?"an":"a";return(e.length>1&&a===e.length-1?"or ":"")+c+" "+s}).join(", "),o=A(t).toLowerCase();if(!e.some(function(s){return o===s}))throw new P(n+"object tested must be "+i+", but "+o+" given",void 0,r)}h(Fr,"expectTypes");function nt(t,e){return e.length>4?e[4]:t._obj}h(nt,"getActual");var mr={bold:["1","22"],dim:["2","22"],italic:["3","23"],underline:["4","24"],inverse:["7","27"],hidden:["8","28"],strike:["9","29"],black:["30","39"],red:["31","39"],green:["32","39"],yellow:["33","39"],blue:["34","39"],magenta:["35","39"],cyan:["36","39"],white:["37","39"],brightblack:["30;1","39"],brightred:["31;1","39"],brightgreen:["32;1","39"],brightyellow:["33;1","39"],brightblue:["34;1","39"],brightmagenta:["35;1","39"],brightcyan:["36;1","39"],brightwhite:["37;1","39"],grey:["90","39"]},Do={special:"cyan",number:"yellow",bigint:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",symbol:"green",date:"magenta",regexp:"red"},de="\u2026";function Or(t,e){let n=mr[Do[e]]||mr[e]||"";return n?`\x1B[${n[0]}m${String(t)}\x1B[${n[1]}m`:String(t)}h(Or,"colorise");function Nr({showHidden:t=!1,depth:e=2,colors:n=!1,customInspect:r=!0,showProxy:i=!1,maxArrayLength:o=1/0,breakLength:s=1/0,seen:a=[],truncate:c=1/0,stylize:p=String}={},g){let y={showHidden:!!t,depth:Number(e),colors:!!n,customInspect:!!r,showProxy:!!i,maxArrayLength:Number(o),breakLength:Number(s),truncate:Number(c),seen:a,inspect:g,stylize:p};return y.colors&&(y.stylize=Or),y}h(Nr,"normaliseOptions");function Br(t){return t>="\uD800"&&t<="\uDBFF"}h(Br,"isHighSurrogate");function Y(t,e,n=de){t=String(t);let r=n.length,i=t.length;if(r>e&&i>r)return n;if(i>e&&i>r){let o=e-r;return o>0&&Br(t[o-1])&&(o=o-1),`${t.slice(0,o)}${n}`}return t}h(Y,"truncate");function z(t,e,n,r=", "){n=n||e.inspect;let i=t.length;if(i===0)return"";let o=e.truncate,s="",a="",c="";for(let p=0;p<i;p+=1){let g=p+1===t.length,y=p+2===t.length;c=`${de}(${t.length-p})`;let b=t[p];e.truncate=o-s.length-(g?0:r.length);let S=a||n(b,e)+(g?"":r),x=s.length+S.length,v=x+c.length;if(g&&x>o&&s.length+c.length<=o||!g&&!y&&v>o||(a=g?"":n(t[p+1],e)+(y?"":r),!g&&y&&v>o&&x+a.length>o))break;if(s+=S,!g&&!y&&x+a.length>=o){c=`${de}(${t.length-p-1})`;break}c=""}return`${s}${c}`}h(z,"inspectList");function _r(t){return t.match(/^[a-zA-Z_][a-zA-Z_0-9]*$/)?t:JSON.stringify(t).replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'")}h(_r,"quoteComplexKey");function ge([t,e],n){return n.truncate-=2,typeof t=="string"?t=_r(t):typeof t!="number"&&(t=`[${n.inspect(t,n)}]`),n.truncate-=t.length,e=n.inspect(e,n),`${t}: ${e}`}h(ge,"inspectProperty");function kr(t,e){let n=Object.keys(t).slice(t.length);if(!t.length&&!n.length)return"[]";e.truncate-=4;let r=z(t,e);e.truncate-=r.length;let i="";return n.length&&(i=z(n.map(o=>[o,t[o]]),e,ge)),`[ ${r}${i?`, ${i}`:""} ]`}h(kr,"inspectArray");var Mo=h(t=>typeof w=="function"&&t instanceof w?"Buffer":t[Symbol.toStringTag]?t[Symbol.toStringTag]:t.constructor.name,"getArrayName");function Q(t,e){let n=Mo(t);e.truncate-=n.length+4;let r=Object.keys(t).slice(t.length);if(!t.length&&!r.length)return`${n}[]`;let i="";for(let s=0;s<t.length;s++){let a=`${e.stylize(Y(t[s],e.truncate),"number")}${s===t.length-1?"":", "}`;if(e.truncate-=a.length,t[s]!==t.length&&e.truncate<=3){i+=`${de}(${t.length-t[s]+1})`;break}i+=a}let o="";return r.length&&(o=z(r.map(s=>[s,t[s]]),e,ge)),`${n}[ ${i}${o?`, ${o}`:""} ]`}h(Q,"inspectTypedArray");function Ur(t,e){let n=t.toJSON();if(n===null)return"Invalid Date";let r=n.split("T"),i=r[0];return e.stylize(`${i}T${Y(r[1],e.truncate-i.length-1)}`,"date")}h(Ur,"inspectDate");function Wt(t,e){let n=t[Symbol.toStringTag]||"Function",r=t.name;return r?e.stylize(`[${n} ${Y(r,e.truncate-11)}]`,"special"):e.stylize(`[${n}]`,"special")}h(Wt,"inspectFunction");function jr([t,e],n){return n.truncate-=4,t=n.inspect(t,n),n.truncate-=t.length,e=n.inspect(e,n),`${t} => ${e}`}h(jr,"inspectMapEntry");function Lr(t){let e=[];return t.forEach((n,r)=>{e.push([r,n])}),e}h(Lr,"mapToEntries");function $r(t,e){return t.size===0?"Map{}":(e.truncate-=7,`Map{ ${z(Lr(t),e,jr)} }`)}h($r,"inspectMap");var To=Number.isNaN||(t=>t!==t);function Kt(t,e){return To(t)?e.stylize("NaN","number"):t===1/0?e.stylize("Infinity","number"):t===-1/0?e.stylize("-Infinity","number"):t===0?e.stylize(1/t===1/0?"+0":"-0","number"):e.stylize(Y(String(t),e.truncate),"number")}h(Kt,"inspectNumber");function Qt(t,e){let n=Y(t.toString(),e.truncate-1);return n!==de&&(n+="n"),e.stylize(n,"bigint")}h(Qt,"inspectBigInt");function qr(t,e){let n=t.toString().split("/")[2],r=e.truncate-(2+n.length),i=t.source;return e.stylize(`/${Y(i,r)}/${n}`,"regexp")}h(qr,"inspectRegExp");function Vr(t){let e=[];return t.forEach(n=>{e.push(n)}),e}h(Vr,"arrayFromSet");function zr(t,e){return t.size===0?"Set{}":(e.truncate-=7,`Set{ ${z(Vr(t),e)} }`)}h(zr,"inspectSet");var yr=new RegExp("['\\u0000-\\u001f\\u007f-\\u009f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]","g"),Fo={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},Oo=16,No=4;function Gr(t){return Fo[t]||`\\u${`0000${t.charCodeAt(0).toString(Oo)}`.slice(-No)}`}h(Gr,"escape");function Ht(t,e){return yr.test(t)&&(t=t.replace(yr,Gr)),e.stylize(`'${Y(t,e.truncate-2)}'`,"string")}h(Ht,"inspectString");function Yt(t){return"description"in Symbol.prototype?t.description?`Symbol(${t.description})`:"Symbol()":t.toString()}h(Yt,"inspectSymbol");var Bo=h(()=>"Promise{\u2026}","getPromiseValue"),_o=Bo;function Ie(t,e){let n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[];if(n.length===0&&r.length===0)return"{}";if(e.truncate-=4,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let i=z(n.map(a=>[a,t[a]]),e,ge),o=z(r.map(a=>[a,t[a]]),e,ge);e.seen.pop();let s="";return i&&o&&(s=", "),`{ ${i}${s}${o} }`}h(Ie,"inspectObject");var Vt=typeof Symbol<"u"&&Symbol.toStringTag?Symbol.toStringTag:!1;function Wr(t,e){let n="";return Vt&&Vt in t&&(n=t[Vt]),n=n||t.constructor.name,(!n||n==="_class")&&(n="<Anonymous Class>"),e.truncate-=n.length,`${n}${Ie(t,e)}`}h(Wr,"inspectClass");function Kr(t,e){return t.length===0?"Arguments[]":(e.truncate-=13,`Arguments[ ${z(t,e)} ]`)}h(Kr,"inspectArguments");var ko=["stack","line","column","name","message","fileName","lineNumber","columnNumber","number","description","cause"];function Qr(t,e){let n=Object.getOwnPropertyNames(t).filter(s=>ko.indexOf(s)===-1),r=t.name;e.truncate-=r.length;let i="";if(typeof t.message=="string"?i=Y(t.message,e.truncate):n.unshift("message"),i=i?`: ${i}`:"",e.truncate-=i.length+5,e.seen=e.seen||[],e.seen.includes(t))return"[Circular]";e.seen.push(t);let o=z(n.map(s=>[s,t[s]]),e,ge);return`${r}${i}${o?` { ${o} }`:""}`}h(Qr,"inspectObject");function Hr([t,e],n){return n.truncate-=3,e?`${n.stylize(String(t),"yellow")}=${n.stylize(`"${e}"`,"string")}`:`${n.stylize(String(t),"yellow")}`}h(Hr,"inspectAttribute");function Qe(t,e){return z(t,e,Yr,`
`)}h(Qe,"inspectNodeCollection");function Yr(t,e){switch(t.nodeType){case 1:return ln(t,e);case 3:return e.inspect(t.data,e);default:return e.inspect(t,e)}}h(Yr,"inspectNode");function ln(t,e){let n=t.getAttributeNames(),r=t.tagName.toLowerCase(),i=e.stylize(`<${r}`,"special"),o=e.stylize(">","special"),s=e.stylize(`</${r}>`,"special");e.truncate-=r.length*2+5;let a="";n.length>0&&(a+=" ",a+=z(n.map(g=>[g,t.getAttribute(g)]),e,Hr," ")),e.truncate-=a.length;let c=e.truncate,p=Qe(t.children,e);return p&&p.length>c&&(p=`${de}(${t.children.length})`),`${i}${a}${o}${p}${s}`}h(ln,"inspectHTML");var Uo=typeof Symbol=="function"&&typeof Symbol.for=="function",zt=Uo?Symbol.for("chai/inspect"):"@@chai/inspect",Gt=Symbol.for("nodejs.util.inspect.custom"),wr=new WeakMap,br={},xr={undefined:h((t,e)=>e.stylize("undefined","undefined"),"undefined"),null:h((t,e)=>e.stylize("null","null"),"null"),boolean:h((t,e)=>e.stylize(String(t),"boolean"),"boolean"),Boolean:h((t,e)=>e.stylize(String(t),"boolean"),"Boolean"),number:Kt,Number:Kt,bigint:Qt,BigInt:Qt,string:Ht,String:Ht,function:Wt,Function:Wt,symbol:Yt,Symbol:Yt,Array:kr,Date:Ur,Map:$r,Set:zr,RegExp:qr,Promise:_o,WeakSet:h((t,e)=>e.stylize("WeakSet{\u2026}","special"),"WeakSet"),WeakMap:h((t,e)=>e.stylize("WeakMap{\u2026}","special"),"WeakMap"),Arguments:Kr,Int8Array:Q,Uint8Array:Q,Uint8ClampedArray:Q,Int16Array:Q,Uint16Array:Q,Int32Array:Q,Uint32Array:Q,Float32Array:Q,Float64Array:Q,Generator:h(()=>"","Generator"),DataView:h(()=>"","DataView"),ArrayBuffer:h(()=>"","ArrayBuffer"),Error:Qr,HTMLCollection:Qe,NodeList:Qe},jo=h((t,e,n)=>zt in t&&typeof t[zt]=="function"?t[zt](e):Gt in t&&typeof t[Gt]=="function"?t[Gt](e.depth,e):"inspect"in t&&typeof t.inspect=="function"?t.inspect(e.depth,e):"constructor"in t&&wr.has(t.constructor)?wr.get(t.constructor)(t,e):br[n]?br[n](t,e):"","inspectCustom"),Lo=Object.prototype.toString;function He(t,e={}){let n=Nr(e,He),{customInspect:r}=n,i=t===null?"null":typeof t;if(i==="object"&&(i=Lo.call(t).slice(8,-1)),i in xr)return xr[i](t,n);if(r&&t){let s=jo(t,n,i);if(s)return typeof s=="string"?s:He(s,n)}let o=t?Object.getPrototypeOf(t):!1;return o===Object.prototype||o===null?Ie(t,n):t&&typeof HTMLElement=="function"&&t instanceof HTMLElement?ln(t,n):"constructor"in t?t.constructor!==Object?Wr(t,n):Ie(t,n):t===Object(t)?Ie(t,n):n.stylize(String(t),i)}h(He,"inspect");var _={includeStack:!1,showDiff:!0,truncateThreshold:40,useProxy:!0,proxyExcludedKeys:["then","catch","inspect","toJSON"],deepEqual:null};function C(t,e,n,r){let i={colors:r,depth:typeof n>"u"?2:n,showHidden:e,truncate:_.truncateThreshold?_.truncateThreshold:1/0};return He(t,i)}h(C,"inspect");function ne(t){let e=C(t),n=Object.prototype.toString.call(t);if(_.truncateThreshold&&e.length>=_.truncateThreshold){if(n==="[object Function]")return!t.name||t.name===""?"[Function]":"[Function: "+t.name+"]";if(n==="[object Array]")return"[ Array("+t.length+") ]";if(n==="[object Object]"){let r=Object.keys(t);return"{ Object ("+(r.length>2?r.splice(0,2).join(", ")+", ...":r.join(", "))+") }"}else return e}else return e}h(ne,"objDisplay");function cn(t,e){let n=E(t,"negate"),r=E(t,"object"),i=e[3],o=nt(t,e),s=n?e[2]:e[1],a=E(t,"message");return typeof s=="function"&&(s=s()),s=s||"",s=s.replace(/#\{this\}/g,function(){return ne(r)}).replace(/#\{act\}/g,function(){return ne(o)}).replace(/#\{exp\}/g,function(){return ne(i)}),a?a+": "+s:s}h(cn,"getMessage");function G(t,e,n){let r=t.__flags||(t.__flags=Object.create(null));e.__flags||(e.__flags=Object.create(null)),n=arguments.length===3?n:!0;for(let i in r)(n||i!=="object"&&i!=="ssfi"&&i!=="lockSsfi"&&i!="message")&&(e.__flags[i]=r[i])}h(G,"transferFlags");function Jt(t){if(typeof t>"u")return"undefined";if(t===null)return"null";let e=t[Symbol.toStringTag];return typeof e=="string"?e:Object.prototype.toString.call(t).slice(8,-1)}h(Jt,"type");function fn(){this._key="chai/deep-eql__"+Math.random()+Date.now()}h(fn,"FakeMap");fn.prototype={get:h(function(e){return e[this._key]},"get"),set:h(function(e,n){Object.isExtensible(e)&&Object.defineProperty(e,this._key,{value:n,configurable:!0})},"set")};var Jr=typeof WeakMap=="function"?WeakMap:fn;function Xt(t,e,n){if(!n||oe(t)||oe(e))return null;var r=n.get(t);if(r){var i=r.get(e);if(typeof i=="boolean")return i}return null}h(Xt,"memoizeCompare");function Ee(t,e,n,r){if(!(!n||oe(t)||oe(e))){var i=n.get(t);i?i.set(e,r):(i=new Jr,i.set(e,r),n.set(t,i))}}h(Ee,"memoizeSet");var Xr=Ce;function Ce(t,e,n){if(n&&n.comparator)return Zt(t,e,n);var r=hn(t,e);return r!==null?r:Zt(t,e,n)}h(Ce,"deepEqual");function hn(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e?!0:oe(t)||oe(e)?!1:null}h(hn,"simpleEqual");function Zt(t,e,n){n=n||{},n.memoize=n.memoize===!1?!1:n.memoize||new Jr;var r=n&&n.comparator,i=Xt(t,e,n.memoize);if(i!==null)return i;var o=Xt(e,t,n.memoize);if(o!==null)return o;if(r){var s=r(t,e);if(s===!1||s===!0)return Ee(t,e,n.memoize,s),s;var a=hn(t,e);if(a!==null)return a}var c=Jt(t);if(c!==Jt(e))return Ee(t,e,n.memoize,!1),!1;Ee(t,e,n.memoize,!0);var p=Zr(t,e,c,n);return Ee(t,e,n.memoize,p),p}h(Zt,"extensiveDeepEqual");function Zr(t,e,n,r){switch(n){case"String":case"Number":case"Boolean":case"Date":return Ce(t.valueOf(),e.valueOf());case"Promise":case"Symbol":case"function":case"WeakMap":case"WeakSet":return t===e;case"Error":return pn(t,e,["name","message","code"],r);case"Arguments":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"Array":return Z(t,e,r);case"RegExp":return ei(t,e);case"Generator":return ti(t,e,r);case"DataView":return Z(new Uint8Array(t.buffer),new Uint8Array(e.buffer),r);case"ArrayBuffer":return Z(new Uint8Array(t),new Uint8Array(e),r);case"Set":return en(t,e,r);case"Map":return en(t,e,r);case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.Instant":case"Temporal.ZonedDateTime":case"Temporal.PlainYearMonth":case"Temporal.PlainMonthDay":return t.equals(e);case"Temporal.Duration":return t.total("nanoseconds")===e.total("nanoseconds");case"Temporal.TimeZone":case"Temporal.Calendar":return t.toString()===e.toString();default:return ri(t,e,r)}}h(Zr,"extensiveDeepEqualByType");function ei(t,e){return t.toString()===e.toString()}h(ei,"regexpEqual");function en(t,e,n){try{if(t.size!==e.size)return!1;if(t.size===0)return!0}catch{return!1}var r=[],i=[];return t.forEach(h(function(s,a){r.push([s,a])},"gatherEntries")),e.forEach(h(function(s,a){i.push([s,a])},"gatherEntries")),Z(r.sort(),i.sort(),n)}h(en,"entriesEqual");function Z(t,e,n){var r=t.length;if(r!==e.length)return!1;if(r===0)return!0;for(var i=-1;++i<r;)if(Ce(t[i],e[i],n)===!1)return!1;return!0}h(Z,"iterableEqual");function ti(t,e,n){return Z(Ye(t),Ye(e),n)}h(ti,"generatorEqual");function ni(t){return typeof Symbol<"u"&&typeof t=="object"&&typeof Symbol.iterator<"u"&&typeof t[Symbol.iterator]=="function"}h(ni,"hasIteratorFunction");function tn(t){if(ni(t))try{return Ye(t[Symbol.iterator]())}catch{return[]}return[]}h(tn,"getIteratorEntries");function Ye(t){for(var e=t.next(),n=[e.value];e.done===!1;)e=t.next(),n.push(e.value);return n}h(Ye,"getGeneratorEntries");function nn(t){var e=[];for(var n in t)e.push(n);return e}h(nn,"getEnumerableKeys");function rn(t){for(var e=[],n=Object.getOwnPropertySymbols(t),r=0;r<n.length;r+=1){var i=n[r];Object.getOwnPropertyDescriptor(t,i).enumerable&&e.push(i)}return e}h(rn,"getEnumerableSymbols");function pn(t,e,n,r){var i=n.length;if(i===0)return!0;for(var o=0;o<i;o+=1)if(Ce(t[n[o]],e[n[o]],r)===!1)return!1;return!0}h(pn,"keysEqual");function ri(t,e,n){var r=nn(t),i=nn(e),o=rn(t),s=rn(e);if(r=r.concat(o),i=i.concat(s),r.length&&r.length===i.length)return Z(on(r).sort(),on(i).sort())===!1?!1:pn(t,e,r,n);var a=tn(t),c=tn(e);return a.length&&a.length===c.length?(a.sort(),c.sort(),Z(a,c,n)):r.length===0&&a.length===0&&i.length===0&&c.length===0}h(ri,"objectEqual");function oe(t){return t===null||typeof t!="object"}h(oe,"isPrimitive");function on(t){return t.map(h(function(n){return typeof n=="symbol"?n.toString():n},"mapSymbol"))}h(on,"mapSymbols");function rt(t,e){return typeof t>"u"||t===null?!1:e in Object(t)}h(rt,"hasProperty");function ii(t){return t.replace(/([^\\])\[/g,"$1.[").match(/(\\\.|[^.]+?)+/g).map(r=>{if(r==="constructor"||r==="__proto__"||r==="prototype")return{};let o=/^\[(\d+)\]$/.exec(r),s=null;return o?s={i:parseFloat(o[1])}:s={p:r.replace(/\\([.[\]])/g,"$1")},s})}h(ii,"parsePath");function sn(t,e,n){let r=t,i=null;n=typeof n>"u"?e.length:n;for(let o=0;o<n;o++){let s=e[o];r&&(typeof s.p>"u"?r=r[s.i]:r=r[s.p],o===n-1&&(i=r))}return i}h(sn,"internalGetPathValue");function dn(t,e){let n=ii(e),r=n[n.length-1],i={parent:n.length>1?sn(t,n,n.length-1):t,name:r.p||r.i,value:sn(t,n)};return i.exists=rt(i.parent,i.name),i}h(dn,"getPathInfo");var ie,l=(ie=class{constructor(e,n,r,i){I(this,"__flags",{});return E(this,"ssfi",r||ie),E(this,"lockSsfi",i),E(this,"object",e),E(this,"message",n),E(this,"eql",_.deepEqual||Xr),me(this)}static get includeStack(){return console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),_.includeStack}static set includeStack(e){console.warn("Assertion.includeStack is deprecated, use chai.config.includeStack instead."),_.includeStack=e}static get showDiff(){return console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),_.showDiff}static set showDiff(e){console.warn("Assertion.showDiff is deprecated, use chai.config.showDiff instead."),_.showDiff=e}static addProperty(e,n){gn(this.prototype,e,n)}static addMethod(e,n){mn(this.prototype,e,n)}static addChainableMethod(e,n,r){bn(this.prototype,e,n,r)}static overwriteProperty(e,n){yn(this.prototype,e,n)}static overwriteMethod(e,n){wn(this.prototype,e,n)}static overwriteChainableMethod(e,n,r){xn(this.prototype,e,n,r)}assert(e,n,r,i,o,s){let a=un(this,arguments);if(s!==!1&&(s=!0),i===void 0&&o===void 0&&(s=!1),_.showDiff!==!0&&(s=!1),!a){n=cn(this,arguments);let p={actual:nt(this,arguments),expected:i,showDiff:s},g=In(this,arguments);throw g&&(p.operator=g),new P(n,p,_.includeStack?this.assert:E(this,"ssfi"))}}get _obj(){return E(this,"object")}set _obj(e){E(this,"object",e)}},h(ie,"Assertion"),ie);function Pe(){return _.useProxy&&typeof Proxy<"u"&&typeof Reflect<"u"}h(Pe,"isProxyEnabled");function gn(t,e,n){n=n===void 0?function(){}:n,Object.defineProperty(t,e,{get:h(function r(){!Pe()&&!E(this,"lockSsfi")&&E(this,"ssfi",r);let i=n.call(this);if(i!==void 0)return i;let o=new l;return G(this,o),o},"propertyGetter"),configurable:!0})}h(gn,"addProperty");var $o=Object.getOwnPropertyDescriptor(function(){},"length");function Ae(t,e,n){return $o.configurable&&Object.defineProperty(t,"length",{get:h(function(){throw Error(n?"Invalid Chai property: "+e+'.length. Due to a compatibility issue, "length" cannot directly follow "'+e+'". Use "'+e+'.lengthOf" instead.':"Invalid Chai property: "+e+'.length. See docs for proper usage of "'+e+'".')},"get")}),t}h(Ae,"addLengthGuard");function oi(t){let e=Object.getOwnPropertyNames(t);function n(i){e.indexOf(i)===-1&&e.push(i)}h(n,"addProperty");let r=Object.getPrototypeOf(t);for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n),r=Object.getPrototypeOf(r);return e}h(oi,"getProperties");var Sr=["__flags","__methods","_obj","assert"];function me(t,e){return Pe()?new Proxy(t,{get:h(function n(r,i){if(typeof i=="string"&&_.proxyExcludedKeys.indexOf(i)===-1&&!Reflect.has(r,i)){if(e)throw Error("Invalid Chai property: "+e+"."+i+'. See docs for proper usage of "'+e+'".');let o=null,s=4;throw oi(r).forEach(function(a){if(!Object.prototype.hasOwnProperty(a)&&Sr.indexOf(a)===-1){let c=si(i,a,s);c<s&&(o=a,s=c)}}),Error(o!==null?"Invalid Chai property: "+i+'. Did you mean "'+o+'"?':"Invalid Chai property: "+i)}return Sr.indexOf(i)===-1&&!E(r,"lockSsfi")&&E(r,"ssfi",n),Reflect.get(r,i)},"proxyGetter")}):t}h(me,"proxify");function si(t,e,n){if(Math.abs(t.length-e.length)>=n)return n;let r=[];for(let i=0;i<=t.length;i++)r[i]=Array(e.length+1).fill(0),r[i][0]=i;for(let i=0;i<e.length;i++)r[0][i]=i;for(let i=1;i<=t.length;i++){let o=t.charCodeAt(i-1);for(let s=1;s<=e.length;s++){if(Math.abs(i-s)>=n){r[i][s]=n;continue}r[i][s]=Math.min(r[i-1][s]+1,r[i][s-1]+1,r[i-1][s-1]+(o===e.charCodeAt(s-1)?0:1))}}return r[t.length][e.length]}h(si,"stringDistanceCapped");function mn(t,e,n){let r=h(function(){E(this,"lockSsfi")||E(this,"ssfi",r);let i=n.apply(this,arguments);if(i!==void 0)return i;let o=new l;return G(this,o),o},"methodWrapper");Ae(r,e,!1),t[e]=me(r,e)}h(mn,"addMethod");function yn(t,e,n){let r=Object.getOwnPropertyDescriptor(t,e),i=h(function(){},"_super");r&&typeof r.get=="function"&&(i=r.get),Object.defineProperty(t,e,{get:h(function o(){!Pe()&&!E(this,"lockSsfi")&&E(this,"ssfi",o);let s=E(this,"lockSsfi");E(this,"lockSsfi",!0);let a=n(i).call(this);if(E(this,"lockSsfi",s),a!==void 0)return a;let c=new l;return G(this,c),c},"overwritingPropertyGetter"),configurable:!0})}h(yn,"overwriteProperty");function wn(t,e,n){let r=t[e],i=h(function(){throw new Error(e+" is not a function")},"_super");r&&typeof r=="function"&&(i=r);let o=h(function(){E(this,"lockSsfi")||E(this,"ssfi",o);let s=E(this,"lockSsfi");E(this,"lockSsfi",!0);let a=n(i).apply(this,arguments);if(E(this,"lockSsfi",s),a!==void 0)return a;let c=new l;return G(this,c),c},"overwritingMethodWrapper");Ae(o,e,!1),t[e]=me(o,e)}h(wn,"overwriteMethod");var qo=typeof Object.setPrototypeOf=="function",Er=h(function(){},"testFn"),Vo=Object.getOwnPropertyNames(Er).filter(function(t){let e=Object.getOwnPropertyDescriptor(Er,t);return typeof e!="object"?!0:!e.configurable}),zo=Function.prototype.call,Go=Function.prototype.apply;function bn(t,e,n,r){typeof r!="function"&&(r=h(function(){},"chainingBehavior"));let i={method:n,chainingBehavior:r};t.__methods||(t.__methods={}),t.__methods[e]=i,Object.defineProperty(t,e,{get:h(function(){i.chainingBehavior.call(this);let s=h(function(){E(this,"lockSsfi")||E(this,"ssfi",s);let a=i.method.apply(this,arguments);if(a!==void 0)return a;let c=new l;return G(this,c),c},"chainableMethodWrapper");if(Ae(s,e,!0),qo){let a=Object.create(this);a.call=zo,a.apply=Go,Object.setPrototypeOf(s,a)}else Object.getOwnPropertyNames(t).forEach(function(c){if(Vo.indexOf(c)!==-1)return;let p=Object.getOwnPropertyDescriptor(t,c);Object.defineProperty(s,c,p)});return G(this,s),me(s)},"chainableMethodGetter"),configurable:!0})}h(bn,"addChainableMethod");function xn(t,e,n,r){let i=t.__methods[e],o=i.chainingBehavior;i.chainingBehavior=h(function(){let c=r(o).call(this);if(c!==void 0)return c;let p=new l;return G(this,p),p},"overwritingChainableMethodGetter");let s=i.method;i.method=h(function(){let c=n(s).apply(this,arguments);if(c!==void 0)return c;let p=new l;return G(this,p),p},"overwritingChainableMethodWrapper")}h(xn,"overwriteChainableMethod");function Je(t,e){return C(t)<C(e)?-1:1}h(Je,"compareByInspect");function Sn(t){return typeof Object.getOwnPropertySymbols!="function"?[]:Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})}h(Sn,"getOwnEnumerablePropertySymbols");function En(t){return Object.keys(t).concat(Sn(t))}h(En,"getOwnEnumerableProperties");var Xe=Number.isNaN;function ai(t){let e=A(t);return["Array","Object","Function"].indexOf(e)!==-1}h(ai,"isObjectType");function In(t,e){let n=E(t,"operator"),r=E(t,"negate"),i=e[3],o=r?e[2]:e[1];if(n)return n;if(typeof o=="function"&&(o=o()),o=o||"",!o||/\shave\s/.test(o))return;let s=ai(i);return/\snot\s/.test(o)?s?"notDeepStrictEqual":"notStrictEqual":s?"deepStrictEqual":"strictEqual"}h(In,"getOperator");function it(t){return t.name}h(it,"getName");function Ze(t){return Object.prototype.toString.call(t)==="[object RegExp]"}h(Ze,"isRegExp");function F(t){return["Number","BigInt"].includes(A(t))}h(F,"isNumeric");var{flag:f}=Ke;["to","be","been","is","and","has","have","with","that","which","at","of","same","but","does","still","also"].forEach(function(t){l.addProperty(t)});l.addProperty("not",function(){f(this,"negate",!0)});l.addProperty("deep",function(){f(this,"deep",!0)});l.addProperty("nested",function(){f(this,"nested",!0)});l.addProperty("own",function(){f(this,"own",!0)});l.addProperty("ordered",function(){f(this,"ordered",!0)});l.addProperty("any",function(){f(this,"any",!0),f(this,"all",!1)});l.addProperty("all",function(){f(this,"all",!0),f(this,"any",!1)});var Ir={function:["function","asyncfunction","generatorfunction","asyncgeneratorfunction"],asyncfunction:["asyncfunction","asyncgeneratorfunction"],generatorfunction:["generatorfunction","asyncgeneratorfunction"],asyncgeneratorfunction:["asyncgeneratorfunction"]};function vn(t,e){e&&f(this,"message",e),t=t.toLowerCase();let n=f(this,"object"),r=~["a","e","i","o","u"].indexOf(t.charAt(0))?"an ":"a ",i=A(n).toLowerCase();Ir.function.includes(t)?this.assert(Ir[t].includes(i),"expected #{this} to be "+r+t,"expected #{this} not to be "+r+t):this.assert(t===i,"expected #{this} to be "+r+t,"expected #{this} not to be "+r+t)}h(vn,"an");l.addChainableMethod("an",vn);l.addChainableMethod("a",vn);function ui(t,e){return Xe(t)&&Xe(e)||t===e}h(ui,"SameValueZero");function Re(){f(this,"contains",!0)}h(Re,"includeChainingBehavior");function De(t,e){e&&f(this,"message",e);let n=f(this,"object"),r=A(n).toLowerCase(),i=f(this,"message"),o=f(this,"negate"),s=f(this,"ssfi"),a=f(this,"deep"),c=a?"deep ":"",p=a?f(this,"eql"):ui;i=i?i+": ":"";let g=!1;switch(r){case"string":g=n.indexOf(t)!==-1;break;case"weakset":if(a)throw new P(i+"unable to use .deep.include with WeakSet",void 0,s);g=n.has(t);break;case"map":n.forEach(function(y){g=g||p(y,t)});break;case"set":a?n.forEach(function(y){g=g||p(y,t)}):g=n.has(t);break;case"array":a?g=n.some(function(y){return p(y,t)}):g=n.indexOf(t)!==-1;break;default:{if(t!==Object(t))throw new P(i+"the given combination of arguments ("+r+" and "+A(t).toLowerCase()+") is invalid for this assertion. You can use an array, a map, an object, a set, a string, or a weakset instead of a "+A(t).toLowerCase(),void 0,s);let y=Object.keys(t),b=null,S=0;if(y.forEach(function(x){let v=new l(n);if(G(this,v,!0),f(v,"lockSsfi",!0),!o||y.length===1){v.property(x,t[x]);return}try{v.property(x,t[x])}catch(M){if(!j.compatibleConstructor(M,P))throw M;b===null&&(b=M),S++}},this),o&&y.length>1&&S===y.length)throw b;return}}this.assert(g,"expected #{this} to "+c+"include "+C(t),"expected #{this} to not "+c+"include "+C(t))}h(De,"include");l.addChainableMethod("include",De,Re);l.addChainableMethod("contain",De,Re);l.addChainableMethod("contains",De,Re);l.addChainableMethod("includes",De,Re);l.addProperty("ok",function(){this.assert(f(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy")});l.addProperty("true",function(){this.assert(f(this,"object")===!0,"expected #{this} to be true","expected #{this} to be false",!f(this,"negate"))});l.addProperty("numeric",function(){let t=f(this,"object");this.assert(["Number","BigInt"].includes(A(t)),"expected #{this} to be numeric","expected #{this} to not be numeric",!f(this,"negate"))});l.addProperty("callable",function(){let t=f(this,"object"),e=f(this,"ssfi"),n=f(this,"message"),r=n?`${n}: `:"",i=f(this,"negate"),o=i?`${r}expected ${C(t)} not to be a callable function`:`${r}expected ${C(t)} to be a callable function`,s=["Function","AsyncFunction","GeneratorFunction","AsyncGeneratorFunction"].includes(A(t));if(s&&i||!s&&!i)throw new P(o,void 0,e)});l.addProperty("false",function(){this.assert(f(this,"object")===!1,"expected #{this} to be false","expected #{this} to be true",!!f(this,"negate"))});l.addProperty("null",function(){this.assert(f(this,"object")===null,"expected #{this} to be null","expected #{this} not to be null")});l.addProperty("undefined",function(){this.assert(f(this,"object")===void 0,"expected #{this} to be undefined","expected #{this} not to be undefined")});l.addProperty("NaN",function(){this.assert(Xe(f(this,"object")),"expected #{this} to be NaN","expected #{this} not to be NaN")});function Cn(){let t=f(this,"object");this.assert(t!=null,"expected #{this} to exist","expected #{this} to not exist")}h(Cn,"assertExist");l.addProperty("exist",Cn);l.addProperty("exists",Cn);l.addProperty("empty",function(){let t=f(this,"object"),e=f(this,"ssfi"),n=f(this,"message"),r;switch(n=n?n+": ":"",A(t).toLowerCase()){case"array":case"string":r=t.length;break;case"map":case"set":r=t.size;break;case"weakmap":case"weakset":throw new P(n+".empty was passed a weak collection",void 0,e);case"function":{let i=n+".empty was passed a function "+it(t);throw new P(i.trim(),void 0,e)}default:if(t!==Object(t))throw new P(n+".empty was passed non-string primitive "+C(t),void 0,e);r=Object.keys(t).length}this.assert(r===0,"expected #{this} to be empty","expected #{this} not to be empty")});function Pn(){let t=f(this,"object"),e=A(t);this.assert(e==="Arguments","expected #{this} to be arguments but got "+e,"expected #{this} to not be arguments")}h(Pn,"checkArguments");l.addProperty("arguments",Pn);l.addProperty("Arguments",Pn);function ot(t,e){e&&f(this,"message",e);let n=f(this,"object");if(f(this,"deep")){let r=f(this,"lockSsfi");f(this,"lockSsfi",!0),this.eql(t),f(this,"lockSsfi",r)}else this.assert(t===n,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",t,this._obj,!0)}h(ot,"assertEqual");l.addMethod("equal",ot);l.addMethod("equals",ot);l.addMethod("eq",ot);function An(t,e){e&&f(this,"message",e);let n=f(this,"eql");this.assert(n(t,f(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",t,this._obj,!0)}h(An,"assertEql");l.addMethod("eql",An);l.addMethod("eqls",An);function st(t,e){e&&f(this,"message",e);let n=f(this,"object"),r=f(this,"doLength"),i=f(this,"message"),o=i?i+": ":"",s=f(this,"ssfi"),a=A(n).toLowerCase(),c=A(t).toLowerCase();if(r&&a!=="map"&&a!=="set"&&new l(n,i,s,!0).to.have.property("length"),!r&&a==="date"&&c!=="date")throw new P(o+"the argument to above must be a date",void 0,s);if(!F(t)&&(r||F(n)))throw new P(o+"the argument to above must be a number",void 0,s);if(!r&&a!=="date"&&!F(n)){let p=a==="string"?"'"+n+"'":n;throw new P(o+"expected "+p+" to be a number or a date",void 0,s)}if(r){let p="length",g;a==="map"||a==="set"?(p="size",g=n.size):g=n.length,this.assert(g>t,"expected #{this} to have a "+p+" above #{exp} but got #{act}","expected #{this} to not have a "+p+" above #{exp}",t,g)}else this.assert(n>t,"expected #{this} to be above #{exp}","expected #{this} to be at most #{exp}",t)}h(st,"assertAbove");l.addMethod("above",st);l.addMethod("gt",st);l.addMethod("greaterThan",st);function at(t,e){e&&f(this,"message",e);let n=f(this,"object"),r=f(this,"doLength"),i=f(this,"message"),o=i?i+": ":"",s=f(this,"ssfi"),a=A(n).toLowerCase(),c=A(t).toLowerCase(),p,g=!0;if(r&&a!=="map"&&a!=="set"&&new l(n,i,s,!0).to.have.property("length"),!r&&a==="date"&&c!=="date")p=o+"the argument to least must be a date";else if(!F(t)&&(r||F(n)))p=o+"the argument to least must be a number";else if(!r&&a!=="date"&&!F(n)){let y=a==="string"?"'"+n+"'":n;p=o+"expected "+y+" to be a number or a date"}else g=!1;if(g)throw new P(p,void 0,s);if(r){let y="length",b;a==="map"||a==="set"?(y="size",b=n.size):b=n.length,this.assert(b>=t,"expected #{this} to have a "+y+" at least #{exp} but got #{act}","expected #{this} to have a "+y+" below #{exp}",t,b)}else this.assert(n>=t,"expected #{this} to be at least #{exp}","expected #{this} to be below #{exp}",t)}h(at,"assertLeast");l.addMethod("least",at);l.addMethod("gte",at);l.addMethod("greaterThanOrEqual",at);function ut(t,e){e&&f(this,"message",e);let n=f(this,"object"),r=f(this,"doLength"),i=f(this,"message"),o=i?i+": ":"",s=f(this,"ssfi"),a=A(n).toLowerCase(),c=A(t).toLowerCase(),p,g=!0;if(r&&a!=="map"&&a!=="set"&&new l(n,i,s,!0).to.have.property("length"),!r&&a==="date"&&c!=="date")p=o+"the argument to below must be a date";else if(!F(t)&&(r||F(n)))p=o+"the argument to below must be a number";else if(!r&&a!=="date"&&!F(n)){let y=a==="string"?"'"+n+"'":n;p=o+"expected "+y+" to be a number or a date"}else g=!1;if(g)throw new P(p,void 0,s);if(r){let y="length",b;a==="map"||a==="set"?(y="size",b=n.size):b=n.length,this.assert(b<t,"expected #{this} to have a "+y+" below #{exp} but got #{act}","expected #{this} to not have a "+y+" below #{exp}",t,b)}else this.assert(n<t,"expected #{this} to be below #{exp}","expected #{this} to be at least #{exp}",t)}h(ut,"assertBelow");l.addMethod("below",ut);l.addMethod("lt",ut);l.addMethod("lessThan",ut);function lt(t,e){e&&f(this,"message",e);let n=f(this,"object"),r=f(this,"doLength"),i=f(this,"message"),o=i?i+": ":"",s=f(this,"ssfi"),a=A(n).toLowerCase(),c=A(t).toLowerCase(),p,g=!0;if(r&&a!=="map"&&a!=="set"&&new l(n,i,s,!0).to.have.property("length"),!r&&a==="date"&&c!=="date")p=o+"the argument to most must be a date";else if(!F(t)&&(r||F(n)))p=o+"the argument to most must be a number";else if(!r&&a!=="date"&&!F(n)){let y=a==="string"?"'"+n+"'":n;p=o+"expected "+y+" to be a number or a date"}else g=!1;if(g)throw new P(p,void 0,s);if(r){let y="length",b;a==="map"||a==="set"?(y="size",b=n.size):b=n.length,this.assert(b<=t,"expected #{this} to have a "+y+" at most #{exp} but got #{act}","expected #{this} to have a "+y+" above #{exp}",t,b)}else this.assert(n<=t,"expected #{this} to be at most #{exp}","expected #{this} to be above #{exp}",t)}h(lt,"assertMost");l.addMethod("most",lt);l.addMethod("lte",lt);l.addMethod("lessThanOrEqual",lt);l.addMethod("within",function(t,e,n){n&&f(this,"message",n);let r=f(this,"object"),i=f(this,"doLength"),o=f(this,"message"),s=o?o+": ":"",a=f(this,"ssfi"),c=A(r).toLowerCase(),p=A(t).toLowerCase(),g=A(e).toLowerCase(),y,b=!0,S=p==="date"&&g==="date"?t.toISOString()+".."+e.toISOString():t+".."+e;if(i&&c!=="map"&&c!=="set"&&new l(r,o,a,!0).to.have.property("length"),!i&&c==="date"&&(p!=="date"||g!=="date"))y=s+"the arguments to within must be dates";else if((!F(t)||!F(e))&&(i||F(r)))y=s+"the arguments to within must be numbers";else if(!i&&c!=="date"&&!F(r)){let x=c==="string"?"'"+r+"'":r;y=s+"expected "+x+" to be a number or a date"}else b=!1;if(b)throw new P(y,void 0,a);if(i){let x="length",v;c==="map"||c==="set"?(x="size",v=r.size):v=r.length,this.assert(v>=t&&v<=e,"expected #{this} to have a "+x+" within "+S,"expected #{this} to not have a "+x+" within "+S)}else this.assert(r>=t&&r<=e,"expected #{this} to be within "+S,"expected #{this} to not be within "+S)});function Rn(t,e){e&&f(this,"message",e);let n=f(this,"object"),r=f(this,"ssfi"),i=f(this,"message"),o;try{o=n instanceof t}catch(a){throw a instanceof TypeError?(i=i?i+": ":"",new P(i+"The instanceof assertion needs a constructor but "+A(t)+" was given.",void 0,r)):a}let s=it(t);s==null&&(s="an unnamed constructor"),this.assert(o,"expected #{this} to be an instance of "+s,"expected #{this} to not be an instance of "+s)}h(Rn,"assertInstanceOf");l.addMethod("instanceof",Rn);l.addMethod("instanceOf",Rn);function Dn(t,e,n){n&&f(this,"message",n);let r=f(this,"nested"),i=f(this,"own"),o=f(this,"message"),s=f(this,"object"),a=f(this,"ssfi"),c=typeof t;if(o=o?o+": ":"",r){if(c!=="string")throw new P(o+"the argument to property must be a string when using nested syntax",void 0,a)}else if(c!=="string"&&c!=="number"&&c!=="symbol")throw new P(o+"the argument to property must be a string, number, or symbol",void 0,a);if(r&&i)throw new P(o+'The "nested" and "own" flags cannot be combined.',void 0,a);if(s==null)throw new P(o+"Target cannot be null or undefined.",void 0,a);let p=f(this,"deep"),g=f(this,"negate"),y=r?dn(s,t):null,b=r?y.value:s[t],S=p?f(this,"eql"):(M,R)=>M===R,x="";p&&(x+="deep "),i&&(x+="own "),r&&(x+="nested "),x+="property ";let v;i?v=Object.prototype.hasOwnProperty.call(s,t):r?v=y.exists:v=rt(s,t),(!g||arguments.length===1)&&this.assert(v,"expected #{this} to have "+x+C(t),"expected #{this} to not have "+x+C(t)),arguments.length>1&&this.assert(v&&S(e,b),"expected #{this} to have "+x+C(t)+" of #{exp}, but got #{act}","expected #{this} to not have "+x+C(t)+" of #{act}",e,b),f(this,"object",b)}h(Dn,"assertProperty");l.addMethod("property",Dn);function Mn(t,e,n){f(this,"own",!0),Dn.apply(this,arguments)}h(Mn,"assertOwnProperty");l.addMethod("ownProperty",Mn);l.addMethod("haveOwnProperty",Mn);function Tn(t,e,n){typeof e=="string"&&(n=e,e=null),n&&f(this,"message",n);let r=f(this,"object"),i=Object.getOwnPropertyDescriptor(Object(r),t),o=f(this,"eql");i&&e?this.assert(o(e,i),"expected the own property descriptor for "+C(t)+" on #{this} to match "+C(e)+", got "+C(i),"expected the own property descriptor for "+C(t)+" on #{this} to not match "+C(e),e,i,!0):this.assert(i,"expected #{this} to have an own property descriptor for "+C(t),"expected #{this} to not have an own property descriptor for "+C(t)),f(this,"object",i)}h(Tn,"assertOwnPropertyDescriptor");l.addMethod("ownPropertyDescriptor",Tn);l.addMethod("haveOwnPropertyDescriptor",Tn);function Fn(){f(this,"doLength",!0)}h(Fn,"assertLengthChain");function On(t,e){e&&f(this,"message",e);let n=f(this,"object"),r=A(n).toLowerCase(),i=f(this,"message"),o=f(this,"ssfi"),s="length",a;switch(r){case"map":case"set":s="size",a=n.size;break;default:new l(n,i,o,!0).to.have.property("length"),a=n.length}this.assert(a==t,"expected #{this} to have a "+s+" of #{exp} but got #{act}","expected #{this} to not have a "+s+" of #{act}",t,a)}h(On,"assertLength");l.addChainableMethod("length",On,Fn);l.addChainableMethod("lengthOf",On,Fn);function Nn(t,e){e&&f(this,"message",e);let n=f(this,"object");this.assert(t.exec(n),"expected #{this} to match "+t,"expected #{this} not to match "+t)}h(Nn,"assertMatch");l.addMethod("match",Nn);l.addMethod("matches",Nn);l.addMethod("string",function(t,e){e&&f(this,"message",e);let n=f(this,"object"),r=f(this,"message"),i=f(this,"ssfi");new l(n,r,i,!0).is.a("string"),this.assert(~n.indexOf(t),"expected #{this} to contain "+C(t),"expected #{this} to not contain "+C(t))});function Bn(t){let e=f(this,"object"),n=A(e),r=A(t),i=f(this,"ssfi"),o=f(this,"deep"),s,a="",c,p=!0,g=f(this,"message");g=g?g+": ":"";let y=g+"when testing keys against an object or an array you must give a single Array|Object|String argument or multiple String arguments";if(n==="Map"||n==="Set")a=o?"deeply ":"",c=[],e.forEach(function(R,O){c.push(O)}),r!=="Array"&&(t=Array.prototype.slice.call(arguments));else{switch(c=En(e),r){case"Array":if(arguments.length>1)throw new P(y,void 0,i);break;case"Object":if(arguments.length>1)throw new P(y,void 0,i);t=Object.keys(t);break;default:t=Array.prototype.slice.call(arguments)}t=t.map(function(R){return typeof R=="symbol"?R:String(R)})}if(!t.length)throw new P(g+"keys required",void 0,i);let b=t.length,S=f(this,"any"),x=f(this,"all"),v=t,M=o?f(this,"eql"):(R,O)=>R===O;if(!S&&!x&&(x=!0),S&&(p=v.some(function(R){return c.some(function(O){return M(R,O)})})),x&&(p=v.every(function(R){return c.some(function(O){return M(R,O)})}),f(this,"contains")||(p=p&&t.length==c.length)),b>1){t=t.map(function(O){return C(O)});let R=t.pop();x&&(s=t.join(", ")+", and "+R),S&&(s=t.join(", ")+", or "+R)}else s=C(t[0]);s=(b>1?"keys ":"key ")+s,s=(f(this,"contains")?"contain ":"have ")+s,this.assert(p,"expected #{this} to "+a+s,"expected #{this} to not "+a+s,v.slice(0).sort(Je),c.sort(Je),!0)}h(Bn,"assertKeys");l.addMethod("keys",Bn);l.addMethod("key",Bn);function ct(t,e,n){n&&f(this,"message",n);let r=f(this,"object"),i=f(this,"ssfi"),o=f(this,"message"),s=f(this,"negate")||!1;new l(r,o,i,!0).is.a("function"),(Ze(t)||typeof t=="string")&&(e=t,t=null);let a,c=!1;try{r()}catch(S){c=!0,a=S}let p=t===void 0&&e===void 0,g=!!(t&&e),y=!1,b=!1;if(p||!p&&!s){let S="an error";t instanceof Error?S="#{exp}":t&&(S=j.getConstructorName(t));let x=a;if(a instanceof Error)x=a.toString();else if(typeof a=="string")x=a;else if(a&&(typeof a=="object"||typeof a=="function"))try{x=j.getConstructorName(a)}catch{}this.assert(c,"expected #{this} to throw "+S,"expected #{this} to not throw an error but #{act} was thrown",t&&t.toString(),x)}if(t&&a&&(t instanceof Error&&j.compatibleInstance(a,t)===s&&(g&&s?y=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a&&!s?" but #{act} was thrown":""),t.toString(),a.toString())),j.compatibleConstructor(a,t)===s&&(g&&s?y=!0:this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&j.getConstructorName(t),a instanceof Error?a.toString():a&&j.getConstructorName(a)))),a&&e!==void 0&&e!==null){let S="including";Ze(e)&&(S="matching"),j.compatibleMessage(a,e)===s&&(g&&s?b=!0:this.assert(s,"expected #{this} to throw error "+S+" #{exp} but got #{act}","expected #{this} to throw error not "+S+" #{exp}",e,j.getMessage(a)))}y&&b&&this.assert(s,"expected #{this} to throw #{exp} but #{act} was thrown","expected #{this} to not throw #{exp}"+(a?" but #{act} was thrown":""),t instanceof Error?t.toString():t&&j.getConstructorName(t),a instanceof Error?a.toString():a&&j.getConstructorName(a)),f(this,"object",a)}h(ct,"assertThrows");l.addMethod("throw",ct);l.addMethod("throws",ct);l.addMethod("Throw",ct);function _n(t,e){e&&f(this,"message",e);let n=f(this,"object"),r=f(this,"itself"),i=typeof n=="function"&&!r?n.prototype[t]:n[t];this.assert(typeof i=="function","expected #{this} to respond to "+C(t),"expected #{this} to not respond to "+C(t))}h(_n,"respondTo");l.addMethod("respondTo",_n);l.addMethod("respondsTo",_n);l.addProperty("itself",function(){f(this,"itself",!0)});function kn(t,e){e&&f(this,"message",e);let n=f(this,"object"),r=t(n);this.assert(r,"expected #{this} to satisfy "+ne(t),"expected #{this} to not satisfy"+ne(t),!f(this,"negate"),r)}h(kn,"satisfy");l.addMethod("satisfy",kn);l.addMethod("satisfies",kn);function Un(t,e,n){n&&f(this,"message",n);let r=f(this,"object"),i=f(this,"message"),o=f(this,"ssfi");new l(r,i,o,!0).is.numeric;let s="A `delta` value is required for `closeTo`";if(e==null)throw new P(i?`${i}: ${s}`:s,void 0,o);if(new l(e,i,o,!0).is.numeric,s="A `expected` value is required for `closeTo`",t==null)throw new P(i?`${i}: ${s}`:s,void 0,o);new l(t,i,o,!0).is.numeric;let a=h(p=>p<0n?-p:p,"abs"),c=h(p=>parseFloat(parseFloat(p).toPrecision(12)),"strip");this.assert(c(a(r-t))<=e,"expected #{this} to be close to "+t+" +/- "+e,"expected #{this} not to be close to "+t+" +/- "+e)}h(Un,"closeTo");l.addMethod("closeTo",Un);l.addMethod("approximately",Un);function li(t,e,n,r,i){let o=Array.from(e),s=Array.from(t);if(!r){if(s.length!==o.length)return!1;o=o.slice()}return s.every(function(a,c){if(i)return n?n(a,o[c]):a===o[c];if(!n){let p=o.indexOf(a);return p===-1?!1:(r||o.splice(p,1),!0)}return o.some(function(p,g){return n(a,p)?(r||o.splice(g,1),!0):!1})})}h(li,"isSubsetOf");l.addMethod("members",function(t,e){e&&f(this,"message",e);let n=f(this,"object"),r=f(this,"message"),i=f(this,"ssfi");new l(n,r,i,!0).to.be.iterable,new l(t,r,i,!0).to.be.iterable;let o=f(this,"contains"),s=f(this,"ordered"),a,c,p;o?(a=s?"an ordered superset":"a superset",c="expected #{this} to be "+a+" of #{exp}",p="expected #{this} to not be "+a+" of #{exp}"):(a=s?"ordered members":"members",c="expected #{this} to have the same "+a+" as #{exp}",p="expected #{this} to not have the same "+a+" as #{exp}");let g=f(this,"deep")?f(this,"eql"):void 0;this.assert(li(t,n,g,o,s),c,p,t,n,!0)});l.addProperty("iterable",function(t){t&&f(this,"message",t);let e=f(this,"object");this.assert(e!=null&&e[Symbol.iterator],"expected #{this} to be an iterable","expected #{this} to not be an iterable",e)});function ci(t,e){e&&f(this,"message",e);let n=f(this,"object"),r=f(this,"message"),i=f(this,"ssfi"),o=f(this,"contains"),s=f(this,"deep"),a=f(this,"eql");new l(t,r,i,!0).to.be.an("array"),o?this.assert(t.some(function(c){return n.indexOf(c)>-1}),"expected #{this} to contain one of #{exp}","expected #{this} to not contain one of #{exp}",t,n):s?this.assert(t.some(function(c){return a(n,c)}),"expected #{this} to deeply equal one of #{exp}","expected #{this} to deeply equal one of #{exp}",t,n):this.assert(t.indexOf(n)>-1,"expected #{this} to be one of #{exp}","expected #{this} to not be one of #{exp}",t,n)}h(ci,"oneOf");l.addMethod("oneOf",ci);function jn(t,e,n){n&&f(this,"message",n);let r=f(this,"object"),i=f(this,"message"),o=f(this,"ssfi");new l(r,i,o,!0).is.a("function");let s;e?(new l(t,i,o,!0).to.have.property(e),s=t[e]):(new l(t,i,o,!0).is.a("function"),s=t()),r();let a=e==null?t():t[e],c=e==null?s:"."+e;f(this,"deltaMsgObj",c),f(this,"initialDeltaValue",s),f(this,"finalDeltaValue",a),f(this,"deltaBehavior","change"),f(this,"realDelta",a!==s),this.assert(s!==a,"expected "+c+" to change","expected "+c+" to not change")}h(jn,"assertChanges");l.addMethod("change",jn);l.addMethod("changes",jn);function Ln(t,e,n){n&&f(this,"message",n);let r=f(this,"object"),i=f(this,"message"),o=f(this,"ssfi");new l(r,i,o,!0).is.a("function");let s;e?(new l(t,i,o,!0).to.have.property(e),s=t[e]):(new l(t,i,o,!0).is.a("function"),s=t()),new l(s,i,o,!0).is.a("number"),r();let a=e==null?t():t[e],c=e==null?s:"."+e;f(this,"deltaMsgObj",c),f(this,"initialDeltaValue",s),f(this,"finalDeltaValue",a),f(this,"deltaBehavior","increase"),f(this,"realDelta",a-s),this.assert(a-s>0,"expected "+c+" to increase","expected "+c+" to not increase")}h(Ln,"assertIncreases");l.addMethod("increase",Ln);l.addMethod("increases",Ln);function $n(t,e,n){n&&f(this,"message",n);let r=f(this,"object"),i=f(this,"message"),o=f(this,"ssfi");new l(r,i,o,!0).is.a("function");let s;e?(new l(t,i,o,!0).to.have.property(e),s=t[e]):(new l(t,i,o,!0).is.a("function"),s=t()),new l(s,i,o,!0).is.a("number"),r();let a=e==null?t():t[e],c=e==null?s:"."+e;f(this,"deltaMsgObj",c),f(this,"initialDeltaValue",s),f(this,"finalDeltaValue",a),f(this,"deltaBehavior","decrease"),f(this,"realDelta",s-a),this.assert(a-s<0,"expected "+c+" to decrease","expected "+c+" to not decrease")}h($n,"assertDecreases");l.addMethod("decrease",$n);l.addMethod("decreases",$n);function fi(t,e){e&&f(this,"message",e);let n=f(this,"deltaMsgObj"),r=f(this,"initialDeltaValue"),i=f(this,"finalDeltaValue"),o=f(this,"deltaBehavior"),s=f(this,"realDelta"),a;o==="change"?a=Math.abs(i-r)===Math.abs(t):a=s===Math.abs(t),this.assert(a,"expected "+n+" to "+o+" by "+t,"expected "+n+" to not "+o+" by "+t)}h(fi,"assertDelta");l.addMethod("by",fi);l.addProperty("extensible",function(){let t=f(this,"object"),e=t===Object(t)&&Object.isExtensible(t);this.assert(e,"expected #{this} to be extensible","expected #{this} to not be extensible")});l.addProperty("sealed",function(){let t=f(this,"object"),e=t===Object(t)?Object.isSealed(t):!0;this.assert(e,"expected #{this} to be sealed","expected #{this} to not be sealed")});l.addProperty("frozen",function(){let t=f(this,"object"),e=t===Object(t)?Object.isFrozen(t):!0;this.assert(e,"expected #{this} to be frozen","expected #{this} to not be frozen")});l.addProperty("finite",function(t){let e=f(this,"object");this.assert(typeof e=="number"&&isFinite(e),"expected #{this} to be a finite number","expected #{this} to not be a finite number")});function et(t,e){return t===e?!0:typeof e!=typeof t?!1:typeof t!="object"||t===null?t===e:e?Array.isArray(t)?Array.isArray(e)?t.every(function(n){return e.some(function(r){return et(n,r)})}):!1:t instanceof Date?e instanceof Date?t.getTime()===e.getTime():!1:Object.keys(t).every(function(n){let r=t[n],i=e[n];return typeof r=="object"&&r!==null&&i!==null?et(r,i):typeof r=="function"?r(i):i===r}):!1}h(et,"compareSubset");l.addMethod("containSubset",function(t){let e=E(this,"object"),n=_.showDiff;this.assert(et(t,e),"expected #{act} to contain subset #{exp}","expected #{act} to not contain subset #{exp}",t,e,n)});function ve(t,e){return new l(t,e)}h(ve,"expect");ve.fail=function(t,e,n,r){throw arguments.length<2&&(n=t,t=void 0),n=n||"expect.fail()",new P(n,{actual:t,expected:e,operator:r},ve.fail)};var hi={};an(hi,{Should:()=>Ko,should:()=>Wo});function qn(){function t(){return this instanceof String||this instanceof Number||this instanceof Boolean||typeof Symbol=="function"&&this instanceof Symbol||typeof BigInt=="function"&&this instanceof BigInt?new l(this.valueOf(),null,t):new l(this,null,t)}h(t,"shouldGetter");function e(r){Object.defineProperty(this,"should",{value:r,enumerable:!0,configurable:!0,writable:!0})}h(e,"shouldSetter"),Object.defineProperty(Object.prototype,"should",{set:e,get:t,configurable:!0});let n={};return n.fail=function(r,i,o,s){throw arguments.length<2&&(o=r,r=void 0),o=o||"should.fail()",new P(o,{actual:r,expected:i,operator:s},n.fail)},n.equal=function(r,i,o){new l(r,o).to.equal(i)},n.Throw=function(r,i,o,s){new l(r,s).to.Throw(i,o)},n.exist=function(r,i){new l(r,i).to.exist},n.not={},n.not.equal=function(r,i,o){new l(r,o).to.not.equal(i)},n.not.Throw=function(r,i,o,s){new l(r,s).to.not.Throw(i,o)},n.not.exist=function(r,i){new l(r,i).to.not.exist},n.throw=n.Throw,n.not.throw=n.not.Throw,n}h(qn,"loadShould");var Wo=qn,Ko=qn;function u(t,e){new l(null,null,u,!0).assert(t,e,"[ negation message unavailable ]")}h(u,"assert");u.fail=function(t,e,n,r){throw arguments.length<2&&(n=t,t=void 0),n=n||"assert.fail()",new P(n,{actual:t,expected:e,operator:r},u.fail)};u.isOk=function(t,e){new l(t,e,u.isOk,!0).is.ok};u.isNotOk=function(t,e){new l(t,e,u.isNotOk,!0).is.not.ok};u.equal=function(t,e,n){let r=new l(t,n,u.equal,!0);r.assert(e==E(r,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",e,t,!0)};u.notEqual=function(t,e,n){let r=new l(t,n,u.notEqual,!0);r.assert(e!=E(r,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",e,t,!0)};u.strictEqual=function(t,e,n){new l(t,n,u.strictEqual,!0).to.equal(e)};u.notStrictEqual=function(t,e,n){new l(t,n,u.notStrictEqual,!0).to.not.equal(e)};u.deepEqual=u.deepStrictEqual=function(t,e,n){new l(t,n,u.deepEqual,!0).to.eql(e)};u.notDeepEqual=function(t,e,n){new l(t,n,u.notDeepEqual,!0).to.not.eql(e)};u.isAbove=function(t,e,n){new l(t,n,u.isAbove,!0).to.be.above(e)};u.isAtLeast=function(t,e,n){new l(t,n,u.isAtLeast,!0).to.be.least(e)};u.isBelow=function(t,e,n){new l(t,n,u.isBelow,!0).to.be.below(e)};u.isAtMost=function(t,e,n){new l(t,n,u.isAtMost,!0).to.be.most(e)};u.isTrue=function(t,e){new l(t,e,u.isTrue,!0).is.true};u.isNotTrue=function(t,e){new l(t,e,u.isNotTrue,!0).to.not.equal(!0)};u.isFalse=function(t,e){new l(t,e,u.isFalse,!0).is.false};u.isNotFalse=function(t,e){new l(t,e,u.isNotFalse,!0).to.not.equal(!1)};u.isNull=function(t,e){new l(t,e,u.isNull,!0).to.equal(null)};u.isNotNull=function(t,e){new l(t,e,u.isNotNull,!0).to.not.equal(null)};u.isNaN=function(t,e){new l(t,e,u.isNaN,!0).to.be.NaN};u.isNotNaN=function(t,e){new l(t,e,u.isNotNaN,!0).not.to.be.NaN};u.exists=function(t,e){new l(t,e,u.exists,!0).to.exist};u.notExists=function(t,e){new l(t,e,u.notExists,!0).to.not.exist};u.isUndefined=function(t,e){new l(t,e,u.isUndefined,!0).to.equal(void 0)};u.isDefined=function(t,e){new l(t,e,u.isDefined,!0).to.not.equal(void 0)};u.isCallable=function(t,e){new l(t,e,u.isCallable,!0).is.callable};u.isNotCallable=function(t,e){new l(t,e,u.isNotCallable,!0).is.not.callable};u.isObject=function(t,e){new l(t,e,u.isObject,!0).to.be.a("object")};u.isNotObject=function(t,e){new l(t,e,u.isNotObject,!0).to.not.be.a("object")};u.isArray=function(t,e){new l(t,e,u.isArray,!0).to.be.an("array")};u.isNotArray=function(t,e){new l(t,e,u.isNotArray,!0).to.not.be.an("array")};u.isString=function(t,e){new l(t,e,u.isString,!0).to.be.a("string")};u.isNotString=function(t,e){new l(t,e,u.isNotString,!0).to.not.be.a("string")};u.isNumber=function(t,e){new l(t,e,u.isNumber,!0).to.be.a("number")};u.isNotNumber=function(t,e){new l(t,e,u.isNotNumber,!0).to.not.be.a("number")};u.isNumeric=function(t,e){new l(t,e,u.isNumeric,!0).is.numeric};u.isNotNumeric=function(t,e){new l(t,e,u.isNotNumeric,!0).is.not.numeric};u.isFinite=function(t,e){new l(t,e,u.isFinite,!0).to.be.finite};u.isBoolean=function(t,e){new l(t,e,u.isBoolean,!0).to.be.a("boolean")};u.isNotBoolean=function(t,e){new l(t,e,u.isNotBoolean,!0).to.not.be.a("boolean")};u.typeOf=function(t,e,n){new l(t,n,u.typeOf,!0).to.be.a(e)};u.notTypeOf=function(t,e,n){new l(t,n,u.notTypeOf,!0).to.not.be.a(e)};u.instanceOf=function(t,e,n){new l(t,n,u.instanceOf,!0).to.be.instanceOf(e)};u.notInstanceOf=function(t,e,n){new l(t,n,u.notInstanceOf,!0).to.not.be.instanceOf(e)};u.include=function(t,e,n){new l(t,n,u.include,!0).include(e)};u.notInclude=function(t,e,n){new l(t,n,u.notInclude,!0).not.include(e)};u.deepInclude=function(t,e,n){new l(t,n,u.deepInclude,!0).deep.include(e)};u.notDeepInclude=function(t,e,n){new l(t,n,u.notDeepInclude,!0).not.deep.include(e)};u.nestedInclude=function(t,e,n){new l(t,n,u.nestedInclude,!0).nested.include(e)};u.notNestedInclude=function(t,e,n){new l(t,n,u.notNestedInclude,!0).not.nested.include(e)};u.deepNestedInclude=function(t,e,n){new l(t,n,u.deepNestedInclude,!0).deep.nested.include(e)};u.notDeepNestedInclude=function(t,e,n){new l(t,n,u.notDeepNestedInclude,!0).not.deep.nested.include(e)};u.ownInclude=function(t,e,n){new l(t,n,u.ownInclude,!0).own.include(e)};u.notOwnInclude=function(t,e,n){new l(t,n,u.notOwnInclude,!0).not.own.include(e)};u.deepOwnInclude=function(t,e,n){new l(t,n,u.deepOwnInclude,!0).deep.own.include(e)};u.notDeepOwnInclude=function(t,e,n){new l(t,n,u.notDeepOwnInclude,!0).not.deep.own.include(e)};u.match=function(t,e,n){new l(t,n,u.match,!0).to.match(e)};u.notMatch=function(t,e,n){new l(t,n,u.notMatch,!0).to.not.match(e)};u.property=function(t,e,n){new l(t,n,u.property,!0).to.have.property(e)};u.notProperty=function(t,e,n){new l(t,n,u.notProperty,!0).to.not.have.property(e)};u.propertyVal=function(t,e,n,r){new l(t,r,u.propertyVal,!0).to.have.property(e,n)};u.notPropertyVal=function(t,e,n,r){new l(t,r,u.notPropertyVal,!0).to.not.have.property(e,n)};u.deepPropertyVal=function(t,e,n,r){new l(t,r,u.deepPropertyVal,!0).to.have.deep.property(e,n)};u.notDeepPropertyVal=function(t,e,n,r){new l(t,r,u.notDeepPropertyVal,!0).to.not.have.deep.property(e,n)};u.ownProperty=function(t,e,n){new l(t,n,u.ownProperty,!0).to.have.own.property(e)};u.notOwnProperty=function(t,e,n){new l(t,n,u.notOwnProperty,!0).to.not.have.own.property(e)};u.ownPropertyVal=function(t,e,n,r){new l(t,r,u.ownPropertyVal,!0).to.have.own.property(e,n)};u.notOwnPropertyVal=function(t,e,n,r){new l(t,r,u.notOwnPropertyVal,!0).to.not.have.own.property(e,n)};u.deepOwnPropertyVal=function(t,e,n,r){new l(t,r,u.deepOwnPropertyVal,!0).to.have.deep.own.property(e,n)};u.notDeepOwnPropertyVal=function(t,e,n,r){new l(t,r,u.notDeepOwnPropertyVal,!0).to.not.have.deep.own.property(e,n)};u.nestedProperty=function(t,e,n){new l(t,n,u.nestedProperty,!0).to.have.nested.property(e)};u.notNestedProperty=function(t,e,n){new l(t,n,u.notNestedProperty,!0).to.not.have.nested.property(e)};u.nestedPropertyVal=function(t,e,n,r){new l(t,r,u.nestedPropertyVal,!0).to.have.nested.property(e,n)};u.notNestedPropertyVal=function(t,e,n,r){new l(t,r,u.notNestedPropertyVal,!0).to.not.have.nested.property(e,n)};u.deepNestedPropertyVal=function(t,e,n,r){new l(t,r,u.deepNestedPropertyVal,!0).to.have.deep.nested.property(e,n)};u.notDeepNestedPropertyVal=function(t,e,n,r){new l(t,r,u.notDeepNestedPropertyVal,!0).to.not.have.deep.nested.property(e,n)};u.lengthOf=function(t,e,n){new l(t,n,u.lengthOf,!0).to.have.lengthOf(e)};u.hasAnyKeys=function(t,e,n){new l(t,n,u.hasAnyKeys,!0).to.have.any.keys(e)};u.hasAllKeys=function(t,e,n){new l(t,n,u.hasAllKeys,!0).to.have.all.keys(e)};u.containsAllKeys=function(t,e,n){new l(t,n,u.containsAllKeys,!0).to.contain.all.keys(e)};u.doesNotHaveAnyKeys=function(t,e,n){new l(t,n,u.doesNotHaveAnyKeys,!0).to.not.have.any.keys(e)};u.doesNotHaveAllKeys=function(t,e,n){new l(t,n,u.doesNotHaveAllKeys,!0).to.not.have.all.keys(e)};u.hasAnyDeepKeys=function(t,e,n){new l(t,n,u.hasAnyDeepKeys,!0).to.have.any.deep.keys(e)};u.hasAllDeepKeys=function(t,e,n){new l(t,n,u.hasAllDeepKeys,!0).to.have.all.deep.keys(e)};u.containsAllDeepKeys=function(t,e,n){new l(t,n,u.containsAllDeepKeys,!0).to.contain.all.deep.keys(e)};u.doesNotHaveAnyDeepKeys=function(t,e,n){new l(t,n,u.doesNotHaveAnyDeepKeys,!0).to.not.have.any.deep.keys(e)};u.doesNotHaveAllDeepKeys=function(t,e,n){new l(t,n,u.doesNotHaveAllDeepKeys,!0).to.not.have.all.deep.keys(e)};u.throws=function(t,e,n,r){(typeof e=="string"||e instanceof RegExp)&&(n=e,e=null);let i=new l(t,r,u.throws,!0).to.throw(e,n);return E(i,"object")};u.doesNotThrow=function(t,e,n,r){(typeof e=="string"||e instanceof RegExp)&&(n=e,e=null),new l(t,r,u.doesNotThrow,!0).to.not.throw(e,n)};u.operator=function(t,e,n,r){let i;switch(e){case"==":i=t==n;break;case"===":i=t===n;break;case">":i=t>n;break;case">=":i=t>=n;break;case"<":i=t<n;break;case"<=":i=t<=n;break;case"!=":i=t!=n;break;case"!==":i=t!==n;break;default:throw r=r&&r+": ",new P(r+'Invalid operator "'+e+'"',void 0,u.operator)}let o=new l(i,r,u.operator,!0);o.assert(E(o,"object")===!0,"expected "+C(t)+" to be "+e+" "+C(n),"expected "+C(t)+" to not be "+e+" "+C(n))};u.closeTo=function(t,e,n,r){new l(t,r,u.closeTo,!0).to.be.closeTo(e,n)};u.approximately=function(t,e,n,r){new l(t,r,u.approximately,!0).to.be.approximately(e,n)};u.sameMembers=function(t,e,n){new l(t,n,u.sameMembers,!0).to.have.same.members(e)};u.notSameMembers=function(t,e,n){new l(t,n,u.notSameMembers,!0).to.not.have.same.members(e)};u.sameDeepMembers=function(t,e,n){new l(t,n,u.sameDeepMembers,!0).to.have.same.deep.members(e)};u.notSameDeepMembers=function(t,e,n){new l(t,n,u.notSameDeepMembers,!0).to.not.have.same.deep.members(e)};u.sameOrderedMembers=function(t,e,n){new l(t,n,u.sameOrderedMembers,!0).to.have.same.ordered.members(e)};u.notSameOrderedMembers=function(t,e,n){new l(t,n,u.notSameOrderedMembers,!0).to.not.have.same.ordered.members(e)};u.sameDeepOrderedMembers=function(t,e,n){new l(t,n,u.sameDeepOrderedMembers,!0).to.have.same.deep.ordered.members(e)};u.notSameDeepOrderedMembers=function(t,e,n){new l(t,n,u.notSameDeepOrderedMembers,!0).to.not.have.same.deep.ordered.members(e)};u.includeMembers=function(t,e,n){new l(t,n,u.includeMembers,!0).to.include.members(e)};u.notIncludeMembers=function(t,e,n){new l(t,n,u.notIncludeMembers,!0).to.not.include.members(e)};u.includeDeepMembers=function(t,e,n){new l(t,n,u.includeDeepMembers,!0).to.include.deep.members(e)};u.notIncludeDeepMembers=function(t,e,n){new l(t,n,u.notIncludeDeepMembers,!0).to.not.include.deep.members(e)};u.includeOrderedMembers=function(t,e,n){new l(t,n,u.includeOrderedMembers,!0).to.include.ordered.members(e)};u.notIncludeOrderedMembers=function(t,e,n){new l(t,n,u.notIncludeOrderedMembers,!0).to.not.include.ordered.members(e)};u.includeDeepOrderedMembers=function(t,e,n){new l(t,n,u.includeDeepOrderedMembers,!0).to.include.deep.ordered.members(e)};u.notIncludeDeepOrderedMembers=function(t,e,n){new l(t,n,u.notIncludeDeepOrderedMembers,!0).to.not.include.deep.ordered.members(e)};u.oneOf=function(t,e,n){new l(t,n,u.oneOf,!0).to.be.oneOf(e)};u.isIterable=function(t,e){if(t==null||!t[Symbol.iterator])throw e=e?`${e} expected ${C(t)} to be an iterable`:`expected ${C(t)} to be an iterable`,new P(e,void 0,u.isIterable)};u.changes=function(t,e,n,r){arguments.length===3&&typeof e=="function"&&(r=n,n=null),new l(t,r,u.changes,!0).to.change(e,n)};u.changesBy=function(t,e,n,r,i){if(arguments.length===4&&typeof e=="function"){let o=r;r=n,i=o}else arguments.length===3&&(r=n,n=null);new l(t,i,u.changesBy,!0).to.change(e,n).by(r)};u.doesNotChange=function(t,e,n,r){return arguments.length===3&&typeof e=="function"&&(r=n,n=null),new l(t,r,u.doesNotChange,!0).to.not.change(e,n)};u.changesButNotBy=function(t,e,n,r,i){if(arguments.length===4&&typeof e=="function"){let o=r;r=n,i=o}else arguments.length===3&&(r=n,n=null);new l(t,i,u.changesButNotBy,!0).to.change(e,n).but.not.by(r)};u.increases=function(t,e,n,r){return arguments.length===3&&typeof e=="function"&&(r=n,n=null),new l(t,r,u.increases,!0).to.increase(e,n)};u.increasesBy=function(t,e,n,r,i){if(arguments.length===4&&typeof e=="function"){let o=r;r=n,i=o}else arguments.length===3&&(r=n,n=null);new l(t,i,u.increasesBy,!0).to.increase(e,n).by(r)};u.doesNotIncrease=function(t,e,n,r){return arguments.length===3&&typeof e=="function"&&(r=n,n=null),new l(t,r,u.doesNotIncrease,!0).to.not.increase(e,n)};u.increasesButNotBy=function(t,e,n,r,i){if(arguments.length===4&&typeof e=="function"){let o=r;r=n,i=o}else arguments.length===3&&(r=n,n=null);new l(t,i,u.increasesButNotBy,!0).to.increase(e,n).but.not.by(r)};u.decreases=function(t,e,n,r){return arguments.length===3&&typeof e=="function"&&(r=n,n=null),new l(t,r,u.decreases,!0).to.decrease(e,n)};u.decreasesBy=function(t,e,n,r,i){if(arguments.length===4&&typeof e=="function"){let o=r;r=n,i=o}else arguments.length===3&&(r=n,n=null);new l(t,i,u.decreasesBy,!0).to.decrease(e,n).by(r)};u.doesNotDecrease=function(t,e,n,r){return arguments.length===3&&typeof e=="function"&&(r=n,n=null),new l(t,r,u.doesNotDecrease,!0).to.not.decrease(e,n)};u.doesNotDecreaseBy=function(t,e,n,r,i){if(arguments.length===4&&typeof e=="function"){let o=r;r=n,i=o}else arguments.length===3&&(r=n,n=null);return new l(t,i,u.doesNotDecreaseBy,!0).to.not.decrease(e,n).by(r)};u.decreasesButNotBy=function(t,e,n,r,i){if(arguments.length===4&&typeof e=="function"){let o=r;r=n,i=o}else arguments.length===3&&(r=n,n=null);new l(t,i,u.decreasesButNotBy,!0).to.decrease(e,n).but.not.by(r)};u.ifError=function(t){if(t)throw t};u.isExtensible=function(t,e){new l(t,e,u.isExtensible,!0).to.be.extensible};u.isNotExtensible=function(t,e){new l(t,e,u.isNotExtensible,!0).to.not.be.extensible};u.isSealed=function(t,e){new l(t,e,u.isSealed,!0).to.be.sealed};u.isNotSealed=function(t,e){new l(t,e,u.isNotSealed,!0).to.not.be.sealed};u.isFrozen=function(t,e){new l(t,e,u.isFrozen,!0).to.be.frozen};u.isNotFrozen=function(t,e){new l(t,e,u.isNotFrozen,!0).to.not.be.frozen};u.isEmpty=function(t,e){new l(t,e,u.isEmpty,!0).to.be.empty};u.isNotEmpty=function(t,e){new l(t,e,u.isNotEmpty,!0).to.not.be.empty};u.containsSubset=function(t,e,n){new l(t,n).to.containSubset(e)};u.doesNotContainSubset=function(t,e,n){new l(t,n).to.not.containSubset(e)};var Qo=[["isOk","ok"],["isNotOk","notOk"],["throws","throw"],["throws","Throw"],["isExtensible","extensible"],["isNotExtensible","notExtensible"],["isSealed","sealed"],["isNotSealed","notSealed"],["isFrozen","frozen"],["isNotFrozen","notFrozen"],["isEmpty","empty"],["isNotEmpty","notEmpty"],["isCallable","isFunction"],["isNotCallable","isNotFunction"],["containsSubset","containSubset"]];for(let[t,e]of Qo)u[e]=u[t];var vr=[];function pi(t){let e={use:pi,AssertionError:P,util:Ke,config:_,expect:ve,assert:u,Assertion:l,...hi};return~vr.indexOf(t)||(t(e,Ke),vr.push(t)),e}h(pi,"use");d();d();d();d();d();var se;(function(t){t[t.featured=0]="featured",t[t.simpleCarousel=1]="simpleCarousel",t[t.prominentCarousel=2]="prominentCarousel",t[t.chapterUpdates=3]="chapterUpdates",t[t.genres=4]="genres"})(se||(se={}));d();d();d();d();var Ya=Object.freeze({items:[],metadata:void 0});d();d();d();d();d();d();d();d();d();d();d();d();d();d();var ft=class extends X{async interceptRequest(e){return e.headers=e.headers??{},e.headers.referer=`${Me}/`,e}async interceptResponse(e,n,r){if(n.headers?.["cf-mitigated"]==="challenge")throw new Ge({url:e.url,method:e.method??"GET"});return r}};async function L(t){let[e,n]=await Application.scheduleRequest(t);if(e.status!==200)throw new Error(`Request failed with status ${e.status}: ${t.url}`);let r=Application.arrayBufferToUTF8String(n);try{return typeof r=="string"?JSON.parse(r):r}catch(i){let o=i instanceof Error?i.message:String(i);throw new Error(`Failed to parse JSON from ${t.url}: ${o}`)}}d();d();d();var ht=class extends q{getSections(){return[D({id:"bonus-chapters",footer:"Filter out chapters with decimal numbers (e.g. 1.1, 2.5)."},[this.hideBonusChaptersRow()])]}hideBonusChaptersRow(){let e={title:"Hide Bonus Chapters",value:pt(),onValueChange:Application.Selector(this,"handleHideBonusChapters")};return U("hide-bonus-chapters",e)}async handleHideBonusChapters(e){di(e),this.reloadForm()}};d();d();var gi=[{id:"none",title:"None (Default)"},{id:"relevance",title:"Relevance"},{id:"lastUploadedChapterAt",title:"Latest Updates"},{id:"createdAt",title:"Recently Added"},{id:"rating",title:"Highest Rated"},{id:"views",title:"Most Popular"},{id:"follows",title:"Most Followed"},{id:"title",title:"Title (A-Z)"},{id:"year",title:"Year"}],dt=[{id:"status",title:"Status (Default)"},{id:"year",title:"Year"},{id:"content_rating",title:"Content Rating"}],mi=[{id:"28",title:"28"},{id:"42",title:"42 (Default)"},{id:"56",title:"56"},{id:"70",title:"70"},{id:"84",title:"84"},{id:"98",title:"98"}],Te=[{id:"en",title:"English"},{id:"ja",title:"Japanese"},{id:"ko",title:"Korean"},{id:"zh",title:"Chinese (Simplified)"},{id:"zh-hk",title:"Chinese (Traditional)"},{id:"id",title:"Indonesian"},{id:"jv",title:"Javanese"},{id:"vi",title:"Vietnamese"},{id:"af",title:"Afrikaans"},{id:"sq",title:"Albanian"},{id:"ar",title:"Arabic"},{id:"az",title:"Azerbaijani"},{id:"eu",title:"Basque"},{id:"be",title:"Belarusian"},{id:"bn",title:"Bengali"},{id:"bg",title:"Bulgarian"},{id:"my",title:"Burmese"},{id:"ca",title:"Catalan"},{id:"cv",title:"Chuvash"},{id:"hr",title:"Croatian"},{id:"cs",title:"Czech"},{id:"da",title:"Danish"},{id:"nl",title:"Dutch"},{id:"eo",title:"Esperanto"},{id:"et",title:"Estonian"},{id:"tl",title:"Filipino"},{id:"fi",title:"Finnish"},{id:"fr",title:"French"},{id:"ka",title:"Georgian"},{id:"de",title:"German"},{id:"el",title:"Greek"},{id:"he",title:"Hebrew"},{id:"hi",title:"Hindi"},{id:"hu",title:"Hungarian"},{id:"ga",title:"Irish"},{id:"it",title:"Italian"},{id:"kk",title:"Kazakh"},{id:"la",title:"Latin"},{id:"lt",title:"Lithuanian"},{id:"ms",title:"Malay"},{id:"mn",title:"Mongolian"},{id:"ne",title:"Nepali"},{id:"no",title:"Norwegian"},{id:"fa",title:"Persian"},{id:"pl",title:"Polish"},{id:"pt",title:"Portuguese"},{id:"pt-br",title:"Portuguese (Brazil)"},{id:"ro",title:"Romanian"},{id:"ru",title:"Russian"},{id:"sr",title:"Serbian"},{id:"sk",title:"Slovak"},{id:"sl",title:"Slovenian"},{id:"es",title:"Spanish"},{id:"es-la",title:"Spanish (LATAM)"},{id:"sv",title:"Swedish"},{id:"tam",title:"Tamil"},{id:"te",title:"Telugu"},{id:"th",title:"Thai"},{id:"tr",title:"Turkish"},{id:"uk",title:"Ukrainian"},{id:"ur",title:"Urdu"},{id:"uz",title:"Uzbek"}];var gt=class extends q{getSections(){return[D({id:"section-visibility",footer:"Toggle sections on or off."},[this.topViews24hRow(),this.topViews7dRow(),this.topViews30dRow(),this.latestUpdatesRow()]),D({id:"hide-adult",footer:"Filter out erotica and pornographic content."},[this.hideAdultRow()]),D({id:"discover-subtitle",footer:"Information displayed below each title."},[this.discoverSubtitleRow(),this.forceDiscoverSubtitleRow()])]}isVisible(e){return!Fe().includes(e)}topViews24hRow(){let e={title:"Top Views (24 Hours)",value:this.isVisible("top-views-24h"),onValueChange:Application.Selector(this,"handleTopViews24h")};return U("toggle-top-views-24h",e)}topViews7dRow(){let e={title:"Top Views (7 Days)",value:this.isVisible("top-views-7d"),onValueChange:Application.Selector(this,"handleTopViews7d")};return U("toggle-top-views-7d",e)}topViews30dRow(){let e={title:"Top Views (30 Days)",value:this.isVisible("top-views-30d"),onValueChange:Application.Selector(this,"handleTopViews30d")};return U("toggle-top-views-30d",e)}latestUpdatesRow(){let e={title:"Latest Updates",value:this.isVisible("latest-updates"),onValueChange:Application.Selector(this,"handleLatestUpdates")};return U("toggle-latest-updates",e)}hideAdultRow(){let e={title:"Hide Adult Results",value:Oe(),onValueChange:Application.Selector(this,"handleHideAdultChange")};return U("hide-adult-results",e)}discoverSubtitleRow(){let e={title:"Discover Subtitle",options:dt,value:[Ne()],minItemCount:1,maxItemCount:1,onValueChange:Application.Selector(this,"handleDiscoverSubtitleChange")};return V("discover-subtitle",e)}forceDiscoverSubtitleRow(){let e={title:"Apply to Latest Updates",value:mt(),onValueChange:Application.Selector(this,"handleForceDiscoverSubtitle")};return U("toggle-force-discover-subtitle",e)}updateHiddenSections(e,n){let r=Fe();n?r=r.filter(i=>i!==e):r.includes(e)||(r=[...r,e]),wi(r),this.reloadForm()}async handleTopViews24h(e){this.updateHiddenSections("top-views-24h",e)}async handleTopViews7d(e){this.updateHiddenSections("top-views-7d",e)}async handleTopViews30d(e){this.updateHiddenSections("top-views-30d",e)}async handleLatestUpdates(e){this.updateHiddenSections("latest-updates",e)}async handleHideAdultChange(e){yi(e),this.reloadForm()}async handleDiscoverSubtitleChange(e){let n=e[0]??"status";bi(n),this.reloadForm()}async handleForceDiscoverSubtitle(e){xi(e),this.reloadForm()}};d();var yt=class extends q{getSections(){return[D({id:"default-sort",footer:"Sort order applied to all results by default."},[this.defaultSortRow()]),D({id:"hide-adult",footer:"Filter out erotica and pornographic content."},[this.hideAdultRow()]),D({id:"search-subtitle",footer:"Information displayed below each title."},[this.searchSubtitleRow()])]}defaultSortRow(){let e={title:"Default Sort",options:gi,value:[Be()],minItemCount:1,maxItemCount:1,onValueChange:Application.Selector(this,"handleDefaultSortChange")};return V("default-search-sort",e)}hideAdultRow(){let e={title:"Hide Adult Titles",value:_e(),onValueChange:Application.Selector(this,"handleHideAdultChange")};return U("hide-adult-results",e)}searchSubtitleRow(){let e={title:"Result Subtitle",options:dt,value:[wt()],minItemCount:1,maxItemCount:1,onValueChange:Application.Selector(this,"handleSearchSubtitleChange")};return V("search-subtitle",e)}async handleDefaultSortChange(e){let n=e[0]??"none";Si(n),this.reloadForm()}async handleHideAdultChange(e){Ei(e),this.reloadForm()}async handleSearchSubtitleChange(e){let n=e[0]??"status";Ii(n),this.reloadForm()}};d();var bt=class extends q{constructor(){super(...arguments);I(this,"tags");I(this,"tagsLoadError")}formWillAppear(){L({url:`${N}/manga/tag?limit=100`,method:"GET"}).then(n=>{this.tags=n,this.reloadForm()}).catch(n=>{this.tagsLoadError=n,console.error("Failed to load tags:",n),this.reloadForm()})}getSections(){return[D({id:"original-language",footer:"Only show titles originally published in these languages."},[this.originalLanguageRow()]),D({id:"chapter-language",footer:"The default language(s) you want to see in the chapter list."},[this.chapterLanguageRow()]),D({id:"tag-exclusion",footer:"Prevent showing titles that contain any of the selected tags."},[this.tagExclusionRow()]),D({id:"items-per-page",footer:"How many items to load per page."},[this.itemsPerPageRow()]),D({id:"data-saver",footer:"Reduce data usage by viewing lower quality chapter images."},[this.dataSaverRow()]),D({id:"affects-info",footer:`Where Each Setting Applies:
Original Language Filter: Latest Updates, Search
Chapter Language Filter: Chapter List, Chapter Version Priority
Tag Exclusion Filter: Latest Updates, Search, Search Filters
Items Per Page: Discover Sections, Search
Data Saver: Chapter Images`},[])]}chapterLanguageRow(){let n={title:"Chapter Language Filter",options:Te,value:xt(),minItemCount:0,maxItemCount:Te.length,onValueChange:Application.Selector(this,"handleChapterLanguageChange")};return V("chapter-language-filter",n)}originalLanguageRow(){let n={title:"Original Language Filter",options:Te,value:ye(),minItemCount:0,maxItemCount:Te.length,onValueChange:Application.Selector(this,"handleOriginalLanguageChange")};return V("original-language-filter",n)}tagExclusionRow(){if(!this.tags&&!this.tagsLoadError){let i={title:"Tag Exclusion Filter (Loading...)",options:[],value:[],minItemCount:0,maxItemCount:1,onValueChange:Application.Selector(this,"handleTagExclusionChange")};return V("tag-exclusion-filter",i)}if(this.tagsLoadError){let i={title:"Tag Exclusion Filter (Error Loading)",options:[],value:[],minItemCount:0,maxItemCount:1,onValueChange:Application.Selector(this,"handleTagExclusionChange")};return V("tag-exclusion-filter",i)}let n=this.tags.data.map(i=>({id:i.id,title:i.name})),r={title:"Tag Exclusion Filter",options:n,value:ae(),minItemCount:0,maxItemCount:n.length,onValueChange:Application.Selector(this,"handleTagExclusionChange")};return V("tag-exclusion-filter",r)}itemsPerPageRow(){let n={title:"Items Per Page",options:mi,value:[we()],minItemCount:0,maxItemCount:1,onValueChange:Application.Selector(this,"handleItemsPerPageChange")};return V("items-per-page",n)}dataSaverRow(){let n={title:"Data Saver",value:St(),onValueChange:Application.Selector(this,"handleDataSaverChange")};return U("data-saver",n)}async handleChapterLanguageChange(n){vi(n),this.reloadForm()}async handleOriginalLanguageChange(n){Ci(n),this.reloadForm()}async handleTagExclusionChange(n){Pi(n),this.reloadForm()}async handleItemsPerPageChange(n){let r=n[0]??"42";Ai(r),this.reloadForm()}async handleDataSaverChange(n){Ri(n),this.reloadForm()}};var Et=class extends q{getSections(){return[D("mainSettings",[Se("site_settings",{title:"Site Settings",form:new bt}),Se("search_settings",{title:"Search Settings",form:new yt}),Se("discover_settings",{title:"Discover Settings",form:new gt}),Se("chapter_settings",{title:"Chapter Settings",form:new ht})])]}};function xt(){return Application.getState("weebdex-chapter-language-filter")??[]}function vi(t){Application.setState(t,"weebdex-chapter-language-filter")}function ye(){return Application.getState("weebdex-original-language-filter")??[]}function Ci(t){Application.setState(t,"weebdex-original-language-filter")}function ae(){return Application.getState("weebdex-excluded-tags")??[]}function Pi(t){Application.setState(t,"weebdex-excluded-tags")}function we(){return Application.getState("weebdex-items-per-page")??"42"}function Ai(t){Application.setState(t,"weebdex-items-per-page")}function St(){return Application.getState("weebdex-data-saver")??!1}function Ri(t){Application.setState(t,"weebdex-data-saver")}function Be(){return Application.getState("weebdex-default-search-sort")??"none"}function Si(t){Application.setState(t,"weebdex-default-search-sort")}function _e(){return Application.getState("weebdex-hide-adult-results")??!1}function Ei(t){Application.setState(t,"weebdex-hide-adult-results")}function Oe(){return Application.getState("weebdex-hide-adult-discover-results")??!1}function yi(t){Application.setState(t,"weebdex-hide-adult-discover-results")}function wt(){return Application.getState("weebdex-search-subtitle")??"status"}function Ii(t){Application.setState(t,"weebdex-search-subtitle")}function Fe(){return Application.getState("weebdex-hidden-discover-sections")??[]}function wi(t){Application.setState(t,"weebdex-hidden-discover-sections")}function Ne(){return Application.getState("weebdex-discover-subtitle")??"status"}function bi(t){Application.setState(t,"weebdex-discover-subtitle")}function mt(){return Application.getState("weebdex-force-discover-subtitle")??!1}function xi(t){Application.setState(t,"weebdex-force-discover-subtitle")}function pt(){return Application.getState("weebdex-hide-bonus-chapters")??!1}function di(t){Application.setState(t,"weebdex-hide-bonus-chapters")}var It=class{async getSettingsForm(){return new Et}};d();function Di(t,e,n=0){let r=t.data??[];return r.length===0?[]:r.filter(i=>!i.is_unavailable).map((i,o)=>{let s=i.chapter?parseFloat(i.chapter):0,a=i.volume?parseFloat(i.volume):0,c=i.relationships?.groups?.[0]?.name||"No Group";return{chapterId:i.id,sourceManga:e,title:i.title||"",chapNum:s,volume:a,langCode:i.language||"en",version:c,sortingIndex:n+o,publishDate:new Date(i.published_at||i.created_at)}})}function Mi(t,e){let n=t.node||N,r=t.id,s=(St()?t.data_optimized||t.data||[]:t.data||t.data_optimized||[]).map(a=>`${n}/data/${r}/${a.name}`);if(s.length===0)throw new Error("No pages found for this chapter");return{id:r,mangaId:e.sourceManga.mangaId,pages:s}}var vt=class{async getChapters(e){let n=e.mangaId,r=[],i=1,o=!0;for(;o;){let g={url:new B(N).addPathComponent("manga").addPathComponent(n).addPathComponent("chapters").setQueryItem("limit","100").setQueryItem("page",i.toString()).toString(),method:"GET"},y=await L(g),b=Di(y,e);r.push(...b),o=y.data.length>=100,i++}let s=xt(),a=s.length===0?r:r.filter(p=>s.includes(p.langCode));pt()&&(a=a.filter(p=>p.chapNum%1===0));let c=a.length-1;return a.forEach((p,g)=>{p.sortingIndex=c-g}),a}async getChapterDetails(e){let n=e.chapterId,i={url:new B(N).addPathComponent("chapter").addPathComponent(n).toString(),method:"GET"},o=await L(i);return Mi(o,e)}};d();d();d();function Ti(t,e){e.forEach(n=>{Object.getOwnPropertyNames(n.prototype).forEach(r=>{Object.defineProperty(t.prototype,r,Object.getOwnPropertyDescriptor(n.prototype,r)||Object.create(null))})})}function ke(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}function ue(t,e){if(!e?.id||!e?.ext)return"";let n=e.ext.startsWith(".")?e.ext.slice(1):e.ext;return`${Vn}/covers/${t}/${e.id}.${n}`}function Ct(t){switch(t){case"suggestive":return pe.MATURE;case"erotica":case"pornographic":return pe.ADULT;default:return pe.EVERYONE}}function Ue(t,e){switch(e){case"year":return t.year?.toString()??"";case"content_rating":return ke(t.content_rating);default:return ke(t.status)}}function Fi(t){let e=t.data??[];return e.length===0?[]:e.filter(n=>n.title&&n.title.trim().length>0).map(n=>({type:"simpleCarouselItem",mangaId:n.id,title:n.title,imageUrl:ue(n.id,n.relationships?.cover),subtitle:Ue(n,Ne())}))}function Oi(t){let e=t.data??[];return e.length===0?[]:e.filter(n=>n.relationships?.manga?.title).map(n=>{let r=n.relationships.manga,i=r.id,o;if(mt())o=Ue(r,Ne());else{let s=n.chapter?`Ch. ${n.chapter}`:"";o=[n.volume?`Vol. ${n.volume}`:"",s].filter(Boolean).join(" ")||"New Chapter"}return{type:"chapterUpdatesCarouselItem",mangaId:i,chapterId:n.id,title:r.title,imageUrl:ue(i,r.relationships?.cover),subtitle:o}})}var Pt=class{async getDiscoverSections(){let e=Fe();return[{id:"top-views-24h",title:"Top Views (24 Hours)",type:se.simpleCarousel},{id:"top-views-7d",title:"Top Views (7 Days)",type:se.simpleCarousel},{id:"top-views-30d",title:"Top Views (30 Days)",type:se.simpleCarousel},{id:"latest-updates",title:"Latest Updates",type:se.chapterUpdates}].filter(r=>!e.includes(r.id))}async getDiscoverSectionItems(e,n){let r=n?.page??1,i=parseInt(we(),10);if(e.id==="latest-updates")return this.getLatestUpdates(r,i);let o=Oe()?["safe","suggestive"]:["safe","suggestive","erotica"],s=new B(N).addPathComponent("manga").addPathComponent("top").setQueryItem("limit",i.toString()).setQueryItem("page",r.toString()).setQueryItem("contentRating",o);switch(e.id){case"top-views-24h":s.setQueryItem("rank","read").setQueryItem("time","24h");break;case"top-views-7d":s.setQueryItem("rank","read").setQueryItem("time","7d");break;case"top-views-30d":s.setQueryItem("rank","read").setQueryItem("time","30d");break;default:throw new Error(`[WeebDex] Unknown discover section: ${e.id}`)}let c={url:s.toString(),method:"GET"},p=await L(c),g=Fi(p),y=g.length>=i;return{items:g,metadata:y?{page:r+1}:void 0}}async getLatestUpdates(e,n){let r=Oe()?["safe","suggestive"]:["safe","suggestive","erotica"],i=new B(N).addPathComponent("chapter").addPathComponent("updates").setQueryItem("limit",n.toString()).setQueryItem("page",e.toString()).setQueryItem("contentRating",r),o=ye();o.length>0&&i.setQueryItem("lang",o);let s=ae();s.length>0&&i.setQueryItem("tagx",s);let c={url:i.toString(),method:"GET"},p=await L(c),g=Oi(p),y=g.length>=n;return{items:g,metadata:y?{page:e+1}:void 0}}};d();d();function Ni(t,e){let n=t.relationships?.authors?.map(c=>c.name).join(", ")||void 0,r=t.relationships?.artists?.map(c=>c.name).join(", ")||void 0,i=[];if(t.alt_titles)for(let c in t.alt_titles)i.push(...t.alt_titles[c]);let o=[],s=[];t.demographic&&s.push({id:`demographic-${t.demographic}`,title:ke(t.demographic)}),t.status&&s.push({id:`status-${t.status}`,title:ke(t.status)}),s.length>0&&o.push({id:"info",title:"Info",tags:s}),t.relationships?.tags&&t.relationships.tags.length>0&&o.push({id:"tags",title:"Tags",tags:t.relationships.tags.map(c=>({id:c.id,title:c.name}))});let a={primaryTitle:t.title,secondaryTitles:i,thumbnailUrl:ue(e,t.relationships?.cover),status:t.status||"Unknown",author:n,artist:r,synopsis:t.description||"No description available.",contentRating:Ct(t.content_rating),tagGroups:o,shareUrl:`${Me}/title/${e}`};return{mangaId:e,mangaInfo:a}}var At=class{async getMangaDetails(e){let r={url:new B(N).addPathComponent("manga").addPathComponent(e).toString(),method:"GET"},i=await L(r);return Ni(i,e)}};d();d();function Bi(t){let e=[],n=[],r=[],i=[],o=[],s="AND";if(!t.filters)return{status:e,demographic:n,contentRating:r,includedTags:i,excludedTags:o,tagMode:s};for(let a of t.filters){if(!a.value||typeof a.value!="object")continue;let c=a.value;switch(a.id){case"status":Object.keys(c).forEach(p=>{c[p]==="included"&&e.push(p)});break;case"demographic":Object.keys(c).forEach(p=>{c[p]==="included"&&n.push(p)});break;case"contentRating":Object.keys(c).forEach(p=>{c[p]==="included"&&r.push(p)});break;case"tags":Object.entries(c).forEach(([p,g])=>{g==="included"&&i.push(p),g==="excluded"&&o.push(p)});break;case"tagMode":{let p=Object.keys(c).find(g=>c[g]==="included");p&&(s=p);break}}}return{status:e,demographic:n,contentRating:r,includedTags:i,excludedTags:o,tagMode:s}}function _i(t){let e=t.data??[];return e.length===0?[]:e.filter(n=>n.title&&n.title.trim().length>0).map(n=>({mangaId:n.id,title:n.title,imageUrl:ue(n.id,n.relationships?.cover),subtitle:Ue(n,wt()),contentRating:Ct(n.content_rating)}))}var Rt=class{async getSearchFilters(){let n={url:new B(N).addPathComponent("manga").addPathComponent("tag").setQueryItem("limit","100").toString(),method:"GET"},r=await L(n),i=[];i.push({type:"multiselect",id:"status",title:"Publication Status",options:[{id:"ongoing",value:"Ongoing"},{id:"completed",value:"Completed"},{id:"hiatus",value:"Hiatus"},{id:"cancelled",value:"Cancelled"}],value:{},allowExclusion:!1,allowEmptySelection:!0,maximum:void 0}),i.push({type:"multiselect",id:"demographic",title:"Demographic",options:[{id:"shounen",value:"Shounen"},{id:"shoujo",value:"Shoujo"},{id:"seinen",value:"Seinen"},{id:"josei",value:"Josei"},{id:"none",value:"None"}],value:{},allowExclusion:!1,allowEmptySelection:!0,maximum:void 0});let o=[{id:"safe",value:"Safe"},{id:"suggestive",value:"Suggestive"},..._e()?[]:[{id:"erotica",value:"Erotica"},{id:"pornographic",value:"Pornographic"}]];i.push({type:"multiselect",id:"contentRating",title:"Content Rating",options:o,value:{},allowExclusion:!1,allowEmptySelection:!0,maximum:void 0});let s=ae(),a=r.data.filter(c=>!s.includes(c.id));return i.push({type:"multiselect",id:"tags",title:"Tags",options:a.map(c=>({id:c.id,value:c.name})),value:{},allowExclusion:!0,allowEmptySelection:!0,maximum:void 0}),i.push({type:"multiselect",id:"tagMode",title:"Tag Inclusion Mode. Only one applies.",options:[{id:"AND",value:"AND - Must match ALL selected tags"},{id:"OR",value:"OR - Can match ANY selected tag"}],value:{AND:"included"},allowExclusion:!1,allowEmptySelection:!1,maximum:1}),i}async getSortingOptions(){let e=[{id:"none",label:"None"},{id:"relevance",label:"Relevance"},{id:"lastUploadedChapterAt",label:"Latest Updates"},{id:"createdAt",label:"Recently Added"},{id:"rating",label:"Highest Rated"},{id:"views",label:"Most Popular"},{id:"follows",label:"Most Followed"},{id:"title",label:"Title (A-Z)"},{id:"year",label:"Year"}],n=Be();if(n==="none")return e;let r=e.findIndex(o=>o.id===n);if(r<=0)return e;let[i]=e.splice(r,1);return e.unshift(i),e}async getSearchResults(e,n,r){let i=n?.page??1,o=parseInt(we(),10),s=e.title?.trim()||"",a=new B(N).addPathComponent("manga").setQueryItem("limit",o.toString()).setQueryItem("page",i.toString());s&&a.setQueryItem("title",s);let c=Bi(e);c.status.length>0&&a.setQueryItem("status",c.status),c.demographic.length>0&&a.setQueryItem("demographic",c.demographic);let p;c.contentRating.length>0?p=c.contentRating:p=["safe","suggestive","erotica"],_e()&&(p=p.filter(O=>O!=="erotica"&&O!=="pornographic")),a.setQueryItem("contentRating",p),c.includedTags.length>0&&a.setQueryItem("tag",c.includedTags);let g=ae();if(g.length>0){let O=[...new Set([...c.excludedTags,...g])];a.setQueryItem("tagx",O)}else c.excludedTags.length>0&&a.setQueryItem("tagx",c.excludedTags);c.tagMode&&a.setQueryItem("tmod",c.tagMode);let y=ye();y.length>0&&a.setQueryItem("lang",y);let b=r?.id??Be();b!=="none"&&(a.setQueryItem("sort",b),a.setQueryItem("order","desc"));let x={url:a.toString(),method:"GET"},v=await L(x),M=_i(v),R=M.length>=o;return{items:M,metadata:R?{page:i+1}:void 0}}};var Me="https://weebdex.org",N="https://api.weebdex.org",Vn="https://srv.weebdex.net",je=class{constructor(){I(this,"cookieStorageInterceptor",new We({storage:"stateManager"}));I(this,"globalRateLimiter",new ze("rateLimiter",{numberOfRequests:5,bufferInterval:1,ignoreImages:!0}));I(this,"weebInterceptor",new ft("weebdex-interceptor"))}async initialise(){this.globalRateLimiter.registerInterceptor(),this.cookieStorageInterceptor.registerInterceptor(),this.weebInterceptor.registerInterceptor()}async saveCloudflareBypassCookies(e){for(let n of e)(n.name.startsWith("cf")||n.name.startsWith("_cf")||n.name.startsWith("__cf"))&&this.cookieStorageInterceptor.setCookie(n)}async bypassCloudflareRequest(e){return e}};Ti(je,[Rt,At,vt,Pt,It]);var Ho=new je;return Ki(Yo);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

chai/index.js:
  (*!
   * Chai - flag utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - test utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - expectTypes utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getActual utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - message composition utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - transferFlags utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * http://chaijs.com
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isProxyEnabled helper
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addLengthGuard utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getProperties utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - proxify utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteProperty utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - addChainingMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - overwriteChainableMethod utility
   * Copyright(c) 2012-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - compareByInspect utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerablePropertySymbols utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - getOwnEnumerableProperties utility
   * Copyright(c) 2011-2016 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * Chai - isNaN utility
   * Copyright(c) 2012-2015 Sakthipriyan Vairamani <thechargingvolcano@gmail.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*!
   * chai
   * Copyright(c) 2011-2014 Jake Luer <jake@alogicalparadox.com>
   * MIT Licensed
   *)
  (*! Bundled license information:
  
  deep-eql/index.js:
    (*!
     * deep-eql
     * Copyright(c) 2013 Jake Luer <jake@alogicalparadox.com>
     * MIT Licensed
     *)
    (*!
     * Check to see if the MemoizeMap has recorded a result of the two operands
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @returns {Boolean|null} result
    *)
    (*!
     * Set the result of the equality into the MemoizeMap
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {MemoizeMap} memoizeMap
     * @param {Boolean} result
    *)
    (*!
     * Primary Export
     *)
    (*!
     * The main logic of the `deepEqual` function.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (optional) Additional options
     * @param {Array} [options.comparator] (optional) Override default algorithm, determining custom equality.
     * @param {Array} [options.memoize] (optional) Provide a custom memoization object which will cache the results of
        complex objects for a speed boost. By passing `false` you can disable memoization, but this will cause circular
        references to blow the stack.
     * @return {Boolean} equal match
    *)
    (*!
     * Compare two Regular Expressions for equality.
     *
     * @param {RegExp} leftHandOperand
     * @param {RegExp} rightHandOperand
     * @return {Boolean} result
     *)
    (*!
     * Compare two Sets/Maps for equality. Faster than other equality functions.
     *
     * @param {Set} leftHandOperand
     * @param {Set} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for flat iterable objects such as Arrays, TypedArrays or Node.js buffers.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Simple equality for generator objects such as those returned by generator functions.
     *
     * @param {Iterable} leftHandOperand
     * @param {Iterable} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Determine if the given object has an @@iterator function.
     *
     * @param {Object} target
     * @return {Boolean} `true` if the object has an @@iterator function.
     *)
    (*!
     * Gets all iterator entries from the given Object. If the Object has no @@iterator function, returns an empty array.
     * This will consume the iterator - which could have side effects depending on the @@iterator implementation.
     *
     * @param {Object} target
     * @returns {Array} an array of entries from the @@iterator function
     *)
    (*!
     * Gets all entries from a Generator. This will consume the generator - which could have side effects.
     *
     * @param {Generator} target
     * @returns {Array} an array of entries from the Generator.
     *)
    (*!
     * Gets all own and inherited enumerable keys from a target.
     *
     * @param {Object} target
     * @returns {Array} an array of own and inherited enumerable keys from the target.
     *)
    (*!
     * Determines if two objects have matching values, given a set of keys. Defers to deepEqual for the equality check of
     * each key. If any value of the given key is not equal, the function will return false (early).
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Array} keys An array of keys to compare the values of leftHandOperand and rightHandOperand against
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Recursively check the equality of two Objects. Once basic sameness has been established it will defer to `deepEqual`
     * for each enumerable key in the object.
     *
     * @param {Mixed} leftHandOperand
     * @param {Mixed} rightHandOperand
     * @param {Object} [options] (Optional)
     * @return {Boolean} result
     *)
    (*!
     * Returns true if the argument is a primitive.
     *
     * This intentionally returns true for all objects that can be compared by reference,
     * including functions and symbols.
     *
     * @param {Mixed} value
     * @return {Boolean} result
     *)
  *)
*/
